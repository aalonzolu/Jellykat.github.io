{"version":3,"sources":["controllers/shows/tvstudios.js"],"names":["define","_require","_exports","_loading","_libraryBrowser","_cardBuilder","_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_getRequireWildcardCache","WeakMap","cache","Object","defineProperty","value","_default","view","params","tabContent","promise","this","preRender","getPromise","context","query","getQuery","key","getSavedQueryKey","libraryBrowser","pageData","data","SortBy","SortOrder","IncludeItemTypes","Recursive","Fields","StartIndex","ParentId","topParentId","loading","show","ApiClient","getStudios","getCurrentUserId","renderTab","reloadItems","then","result","elem","querySelector","cardBuilder","buildCards","Items","itemsContainer","shape","preferThumb","showTitle","scalable","centerText","overlayMoreButton","hide","Promise","_resolve","_reject","imported","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","hasOwnProperty","call","desc","set","_ref","autoFocus"],"mappings":"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","file":"tvstudios.js","sourcesContent":["import loading from 'loading';\nimport libraryBrowser from 'libraryBrowser';\nimport cardBuilder from 'cardBuilder';\n\n/* eslint-disable indent */\n\n    function getQuery(params) {\n        const key = getSavedQueryKey();\n        let pageData = data[key];\n\n        if (!pageData) {\n            pageData = data[key] = {\n                query: {\n                    SortBy: 'SortName',\n                    SortOrder: 'Ascending',\n                    IncludeItemTypes: 'Series',\n                    Recursive: true,\n                    Fields: 'DateCreated,PrimaryImageAspectRatio',\n                    StartIndex: 0\n                }\n            };\n            pageData.query.ParentId = params.topParentId;\n        }\n\n        return pageData.query;\n    }\n\n    function getSavedQueryKey() {\n        return libraryBrowser.getSavedQueryKey('studios');\n    }\n\n    function getPromise(context, params) {\n        const query = getQuery(params);\n        loading.show();\n        return ApiClient.getStudios(ApiClient.getCurrentUserId(), query);\n    }\n\n    function reloadItems(context, params, promise) {\n        promise.then(function (result) {\n            const elem = context.querySelector('#items');\n            cardBuilder.buildCards(result.Items, {\n                itemsContainer: elem,\n                shape: 'backdrop',\n                preferThumb: true,\n                showTitle: true,\n                scalable: true,\n                centerText: true,\n                overlayMoreButton: true,\n                context: 'tvshows'\n            });\n            loading.hide();\n\n            import('autoFocuser').then(({default: autoFocuser}) => {\n                autoFocuser.autoFocus(context);\n            });\n        });\n    }\n\n    const data = {};\n\n    export default function (view, params, tabContent) {\n        let promise;\n        const self = this;\n\n        self.preRender = function () {\n            promise = getPromise(view, params);\n        };\n\n        self.renderTab = function () {\n            reloadItems(tabContent, params, promise);\n        };\n    }\n\n/* eslint-enable indent */\n"]}