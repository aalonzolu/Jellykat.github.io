{"version":3,"sources":["controllers/shows/tvlatest.js"],"names":["define","_require","_exports","_loading","_groupedcards","_cardBuilder","_imageLoader","_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_getRequireWildcardCache","WeakMap","cache","Object","defineProperty","value","_default","view","params","tabContent","latestPromise","this","preRender","getLatestPromise","context","loading","show","userId","ApiClient","getCurrentUserId","options","IncludeItemTypes","Limit","Fields","ParentId","topParentId","ImageTypeLimit","EnableImageTypes","getJSON","getUrl","renderTab","loadLatest","promise","then","items","html","cardBuilder","getCardsHtml","shape","preferThumb","showTitle","showSeriesYear","showParentTitle","overlayText","cardLayout","showUnplayedIndicator","showChildCountIndicator","centerText","lazy","overlayPlayButton","lines","elem","querySelector","innerHTML","imageLoader","lazyChildren","hide","Promise","_resolve","_reject","imported","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_ref","autoFocus","addEventListener","groupedcards"],"mappings":"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","file":"tvlatest.js","sourcesContent":["import loading from 'loading';\nimport groupedcards from 'components/groupedcards';\nimport cardBuilder from 'cardBuilder';\nimport imageLoader from 'imageLoader';\n\n/* eslint-disable indent */\n\n    function getLatestPromise(context, params) {\n        loading.show();\n        const userId = ApiClient.getCurrentUserId();\n        const parentId = params.topParentId;\n        const options = {\n            IncludeItemTypes: 'Episode',\n            Limit: 30,\n            Fields: 'PrimaryImageAspectRatio,BasicSyncInfo',\n            ParentId: parentId,\n            ImageTypeLimit: 1,\n            EnableImageTypes: 'Primary,Backdrop,Thumb'\n        };\n        return ApiClient.getJSON(ApiClient.getUrl('Users/' + userId + '/Items/Latest', options));\n    }\n\n    function loadLatest(context, params, promise) {\n        promise.then(function (items) {\n            let html = '';\n            html += cardBuilder.getCardsHtml({\n                items: items,\n                shape: 'backdrop',\n                preferThumb: true,\n                showTitle: true,\n                showSeriesYear: true,\n                showParentTitle: true,\n                overlayText: false,\n                cardLayout: false,\n                showUnplayedIndicator: false,\n                showChildCountIndicator: true,\n                centerText: true,\n                lazy: true,\n                overlayPlayButton: true,\n                lines: 2\n            });\n            const elem = context.querySelector('#latestEpisodes');\n            elem.innerHTML = html;\n            imageLoader.lazyChildren(elem);\n            loading.hide();\n\n            import('autoFocuser').then(({default: autoFocuser}) => {\n                autoFocuser.autoFocus(context);\n            });\n        });\n    }\n\n    export default function (view, params, tabContent) {\n        const self = this;\n        let latestPromise;\n\n        self.preRender = function () {\n            latestPromise = getLatestPromise(view, params);\n        };\n\n        self.renderTab = function () {\n            loadLatest(tabContent, params, latestPromise);\n        };\n\n        tabContent.querySelector('#latestEpisodes').addEventListener('click', groupedcards);\n    }\n\n/* eslint-enable indent */\n"]}