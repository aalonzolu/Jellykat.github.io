define(["exports","layoutManager","cardBuilder","imageLoader","loading","scripts/livetvcomponents","emby-button","emby-itemscontainer"],(function(_exports,_layoutManager,_cardBuilder,_imageLoader,_loading,_livetvcomponents,_embyButton,_embyItemscontainer){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function enableScrollX(){return!_layoutManager.default.desktop}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=function _default(view,params,tabContent){var activeRecordingsPromise,upcomingRecordingsPromise,self=this;tabContent.querySelector("#upcomingRecordings .recordingItems").addEventListener("timercancelled",(function(){self.preRender(),self.renderTab()})),self.preRender=function(){activeRecordingsPromise=ApiClient.getLiveTvRecordings({UserId:Dashboard.getCurrentUserId(),IsInProgress:!0,Fields:"CanDelete,PrimaryImageAspectRatio,BasicSyncInfo",EnableTotalRecordCount:!1,EnableImageTypes:"Primary,Thumb,Backdrop"}),upcomingRecordingsPromise=ApiClient.getLiveTvTimers({IsActive:!1,IsScheduled:!0})},self.renderTab=function(){_loading.default.show(),function renderActiveRecordings(context,promise){promise.then((function(result){!function renderRecordings(elem,recordings,cardOptions){recordings.length?elem.classList.remove("hide"):elem.classList.add("hide");var recordingItems=elem.querySelector(".recordingItems");enableScrollX()?(recordingItems.classList.add("scrollX"),_layoutManager.default.tv&&recordingItems.classList.add("smoothScrollX"),recordingItems.classList.add("hiddenScrollX"),recordingItems.classList.remove("vertical-wrap")):(recordingItems.classList.remove("scrollX"),recordingItems.classList.remove("smoothScrollX"),recordingItems.classList.remove("hiddenScrollX"),recordingItems.classList.add("vertical-wrap"));recordingItems.innerHTML=_cardBuilder.default.getCardsHtml(Object.assign({items:recordings,shape:enableScrollX()?"autooverflow":"auto",showTitle:!0,showParentTitle:!0,coverImage:!0,cardLayout:!1,centerText:!0,allowBottomPadding:!enableScrollX(),preferThumb:"auto"},cardOptions||{})),_imageLoader.default.lazyChildren(recordingItems)}(context.querySelector("#activeRecordings"),result.Items,{shape:enableScrollX()?"autooverflow":"auto",defaultShape:enableScrollX()?"overflowBackdrop":"backdrop",showParentTitle:!1,showParentTitleOrTitle:!0,showTitle:!1,showAirTime:!0,showAirEndTime:!0,showChannelName:!0,coverImage:!0,overlayText:!1,overlayMoreButton:!0})}))}(tabContent,activeRecordingsPromise),function renderUpcomingRecordings(context,promise){promise.then((function(result){!function renderTimers(context,timers,options){LiveTvHelpers.getTimersHtml(timers,options).then((function(html){var elem=context;html?elem.classList.remove("hide"):elem.classList.add("hide"),elem.querySelector(".recordingItems").innerHTML=html,_imageLoader.default.lazyChildren(elem)}))}(context.querySelector("#upcomingRecordings"),result.Items),_loading.default.hide()}))}(tabContent,upcomingRecordingsPromise)}},_layoutManager=_interopRequireDefault(_layoutManager),_cardBuilder=_interopRequireDefault(_cardBuilder),_imageLoader=_interopRequireDefault(_imageLoader),_loading=_interopRequireDefault(_loading)}));
//# sourceMappingURL=livetvschedule.js.map
