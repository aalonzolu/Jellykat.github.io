define(["exports","loading","cardBuilder","imageLoader","scripts/livetvcomponents","listViewStyle","emby-itemscontainer"],(function(_exports,_loading,_cardBuilder,_imageLoader,_livetvcomponents,_listViewStyle,_embyItemscontainer){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function renderRecordings(elem,recordings,cardOptions,scrollX){if(elem){recordings.length?elem.classList.remove("hide"):elem.classList.add("hide");var recordingItems=elem.querySelector(".recordingItems");scrollX?(recordingItems.classList.add("scrollX"),recordingItems.classList.add("hiddenScrollX"),recordingItems.classList.remove("vertical-wrap")):(recordingItems.classList.remove("scrollX"),recordingItems.classList.remove("hiddenScrollX"),recordingItems.classList.add("vertical-wrap")),recordingItems.innerHTML=_cardBuilder.default.getCardsHtml(Object.assign({items:recordings,shape:scrollX?"autooverflow":"auto",defaultShape:scrollX?"overflowBackdrop":"backdrop",showTitle:!0,showParentTitle:!0,coverImage:!0,cardLayout:!1,centerText:!0,allowBottomPadding:!scrollX,preferThumb:"auto",overlayText:!1},cardOptions||{})),_imageLoader.default.lazyChildren(recordingItems)}}function onMoreClick(e){var type=this.getAttribute("data-type"),serverId=ApiClient.serverId();switch(type){case"latest":Dashboard.navigate("list.html?type=Recordings&serverId="+serverId)}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=function _default(view,params,tabContent){function enableFullRender(){return(new Date).getTime()-lastFullRender>3e5}for(var foldersPromise,latestPromise,lastFullRender=0,moreButtons=tabContent.querySelectorAll(".more"),i=0,length=moreButtons.length;i<length;i++)moreButtons[i].addEventListener("click",onMoreClick);this.preRender=function(){enableFullRender()&&(latestPromise=ApiClient.getLiveTvRecordings({UserId:Dashboard.getCurrentUserId(),Limit:12,Fields:"CanDelete,PrimaryImageAspectRatio,BasicSyncInfo",EnableTotalRecordCount:!1,EnableImageTypes:"Primary,Thumb,Backdrop"}),foldersPromise=ApiClient.getRecordingFolders(Dashboard.getCurrentUserId()))},this.renderTab=function(){enableFullRender()&&(_loading.default.show(),function renderLatestRecordings(context,promise){promise.then((function(result){renderRecordings(context.querySelector("#latestRecordings"),result.Items,{showYear:!0,lines:2},!1),_loading.default.hide()}))}(tabContent,latestPromise),function renderRecordingFolders(context,promise){promise.then((function(result){renderRecordings(context.querySelector("#recordingFolders"),result.Items,{showYear:!1,showParentTitle:!1},!1)}))}(tabContent,foldersPromise),lastFullRender=(new Date).getTime())}},_loading=_interopRequireDefault(_loading),_cardBuilder=_interopRequireDefault(_cardBuilder),_imageLoader=_interopRequireDefault(_imageLoader)}));
//# sourceMappingURL=livetvrecordings.js.map
