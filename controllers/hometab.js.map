{"version":3,"sources":["controllers/hometab.js"],"names":["_typeof","obj","Symbol","iterator","constructor","prototype","define","_exports","userSettings","_loading","_connectionManager","_focusManager","_homeSections","_embyItemscontainer","_interopRequireDefault","__esModule","default","_getRequireWildcardCache","WeakMap","cache","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","onHomeScreenSettingsChanged","this","sectionsRendered","paused","onResume","refresh","value","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","hasOwnProperty","call","desc","set","_default","HomeTab","view","params","_classCallCheck","instance","Constructor","TypeError","apiClient","connectionManager","currentApiClient","sectionsContainer","querySelector","addEventListener","bind","_createClass","protoProps","staticProps","options","homeSections","resume","Promise","resolve","loading","show","destroyHomeSections","getCurrentUser","then","user","loadSections","autoFocus","focusManager","hide","onPause","pause","destroy","destroySections"],"mappings":"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","file":"hometab.js","sourcesContent":["import * as userSettings from 'userSettings';\nimport loading from 'loading';\nimport connectionManager from 'connectionManager';\nimport focusManager from 'focusManager';\nimport homeSections from 'homeSections';\nimport 'emby-itemscontainer';\n\nclass HomeTab {\n    constructor(view, params) {\n        this.view = view;\n        this.params = params;\n        this.apiClient = connectionManager.currentApiClient();\n        this.sectionsContainer = view.querySelector('.sections');\n        view.querySelector('.sections').addEventListener('settingschange', onHomeScreenSettingsChanged.bind(this));\n    }\n    onResume(options) {\n        if (this.sectionsRendered) {\n            const sectionsContainer = this.sectionsContainer;\n\n            if (sectionsContainer) {\n                return homeSections.resume(sectionsContainer, options);\n            }\n\n            return Promise.resolve();\n        }\n\n        loading.show();\n        const view = this.view;\n        const apiClient = this.apiClient;\n        this.destroyHomeSections();\n        this.sectionsRendered = true;\n        return apiClient.getCurrentUser().then(function (user) {\n            return homeSections.loadSections(view.querySelector('.sections'), apiClient, user, userSettings).then(function () {\n                if (options.autoFocus) {\n                    focusManager.autoFocus(view);\n                }\n\n                loading.hide();\n            });\n        });\n    }\n    onPause() {\n        const sectionsContainer = this.sectionsContainer;\n\n        if (sectionsContainer) {\n            homeSections.pause(sectionsContainer);\n        }\n    }\n    destroy() {\n        this.view = null;\n        this.params = null;\n        this.apiClient = null;\n        this.destroyHomeSections();\n        this.sectionsContainer = null;\n    }\n    destroyHomeSections() {\n        const sectionsContainer = this.sectionsContainer;\n\n        if (sectionsContainer) {\n            homeSections.destroySections(sectionsContainer);\n        }\n    }\n}\n\nfunction onHomeScreenSettingsChanged() {\n    this.sectionsRendered = false;\n\n    if (!this.paused) {\n        this.onResume({\n            refresh: true\n        });\n    }\n}\n\nexport default HomeTab;\n"]}