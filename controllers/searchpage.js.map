{"version":3,"sources":["controllers/searchpage.js"],"names":["define","_exports","_searchFields","_searchResults","_events","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_default","view","params","onSearch","e","self","searchResults","search","this","addEventListener","searchFields","SearchFields","element","querySelector","SearchResults","serverId","ApiClient","parentId","collectionType","events","on","destroy"],"mappings":"AAAAA,OAAO,CAAC,UAAW,eAAgB,gBAAiB,WAAW,SAAUC,SAAUC,cAAeC,eAAgBC,SAChH,aAUA,SAASC,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEE,QAASF,KARvFG,OAAOC,eAAeT,SAAU,aAAc,CAC5CU,OAAO,IAETV,SAASO,QAFI,SAAAI,SAAUC,KAAMC,QAC3B,SAASC,SAASC,EAAGL,OACjBM,KAAKC,cAAcC,OAAOR,OAG9B,IAAMM,KAAOG,KACbP,KAAKQ,iBAAiB,YAAY,WACzBJ,KAAKK,eACNL,KAAKK,aAAe,IAAIC,cAAAA,QAAa,CACjCC,QAASX,KAAKY,cAAc,mBAEhCR,KAAKC,cAAgB,IAAIQ,eAAAA,QAAc,CACnCF,QAASX,KAAKY,cAAc,kBAC5BE,SAAUb,OAAOa,UAAYC,UAAUD,WACvCE,SAAUf,OAAOe,SACjBC,eAAgBhB,OAAOgB,iBAE3BC,QAAAA,QAAOC,GAAGf,KAAKK,aAAc,SAAUP,cAG/CF,KAAKQ,iBAAiB,eAAe,WAC7BJ,KAAKK,eACLL,KAAKK,aAAaW,UAClBhB,KAAKK,aAAe,MAGpBL,KAAKC,gBACLD,KAAKC,cAAce,UACnBhB,KAAKC,cAAgB,UAhCjChB,cAAAG,uBAAAH,eACAC,eAAAE,uBAAAF,gBACAC,QAAAC,uBAAAD","file":"searchpage.js","sourcesContent":["import SearchFields from 'searchFields';\nimport SearchResults from 'searchResults';\nimport events from 'events';\n\nexport default function (view, params) {\n    function onSearch(e, value) {\n        self.searchResults.search(value);\n    }\n\n    const self = this;\n    view.addEventListener('viewshow', function () {\n        if (!self.searchFields) {\n            self.searchFields = new SearchFields({\n                element: view.querySelector('.searchFields')\n            });\n            self.searchResults = new SearchResults({\n                element: view.querySelector('.searchResults'),\n                serverId: params.serverId || ApiClient.serverId(),\n                parentId: params.parentId,\n                collectionType: params.collectionType\n            });\n            events.on(self.searchFields, 'search', onSearch);\n        }\n    });\n    view.addEventListener('viewdestroy', function () {\n        if (self.searchFields) {\n            self.searchFields.destroy();\n            self.searchFields = null;\n        }\n\n        if (self.searchResults) {\n            self.searchResults.destroy();\n            self.searchResults = null;\n        }\n    });\n}\n"]}