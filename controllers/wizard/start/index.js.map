{"version":3,"sources":["controllers/wizard/start/index.js"],"names":["define","_exports","_jQuery","_loading","_embyButton","_embySelect","_interopRequireDefault","obj","__esModule","default","onSubmit","save","page","loading","show","apiClient","ApiClient","getJSON","getUrl","then","config","UICulture","val","ajax","type","data","JSON","stringify","url","Dashboard","navigate","this","parents","Object","defineProperty","value","_default","view","params","on","addEventListener","document","querySelector","classList","add","promise1","promise2","Promise","all","responses","loadPage","languageOptions","html","map","l","Value","Name","hide","remove"],"mappings":"AAAAA,OAAO,CAAC,UAAW,SAAU,UAAW,cAAe,gBAAgB,SAAUC,SAAUC,QAASC,SAAUC,YAAaC,aACzH,aASA,SAASC,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEE,QAASF,KAiBzF,SAASG,WAEL,OAjBJ,SAASC,KAAKC,MACVC,SAAAA,QAAQC,OACR,IAAMC,UAAYC,UAClBD,UAAUE,QAAQF,UAAUG,OAAO,0BAA0BC,MAAK,SAAUC,QACxEA,OAAOC,WAAY,EAAAnB,QAAAO,SAAE,8BAA+BG,MAAMU,MAC1DP,UAAUQ,KAAK,CACXC,KAAM,OACNC,KAAMC,KAAKC,UAAUP,QACrBQ,IAAKb,UAAUG,OAAO,2BACvBC,MAAK,WACJU,UAAUC,SAAS,yBAM3BnB,EAAK,EAAAT,QAAAO,SAAEsB,MAAMC,QAAQ,WACd,EA1BTC,OAAOC,eAAejC,SAAU,aAAc,CAC5CkC,OAAO,IAETlC,SAASQ,QA0BI,SAAA2B,SAAUC,KAAMC,SAC3B,EAAApC,QAAAO,SAAE,mBAAoB4B,MAAME,GAAG,SAAU7B,UACzC2B,KAAKG,iBAAiB,YAAY,WAC9BC,SAASC,cAAc,eAAeC,UAAUC,IAAI,sBACpD/B,SAAAA,QAAQC,OACR,IAAMF,KAAOmB,KACPhB,UAAYC,UACZ6B,SAAW9B,UAAUE,QAAQF,UAAUG,OAAO,0BAC9C4B,SAAW/B,UAAUE,QAAQF,UAAUG,OAAO,yBACpD6B,QAAQC,IAAI,CAACH,SAAUC,WAAW3B,MAAK,SAAU8B,YApCzD,SAASC,SAAStC,KAAMQ,OAAQ+B,kBAC5B,EAAAjD,QAAAO,SAAE,8BAA+BG,MAAMwC,KAAKD,gBAAgBE,KAAI,SAAUC,GACtE,MAAO,kBAAoBA,EAAEC,MAAQ,KAAOD,EAAEE,KAAO,gBACrDlC,IAAIF,OAAOC,WACfR,SAAAA,QAAQ4C,OAiCAP,CAAStC,KAAMqC,UAAU,GAAIA,UAAU,UAG/CZ,KAAKG,iBAAiB,YAAY,WAC9BC,SAASC,cAAc,eAAeC,UAAUe,OAAO,0BA9C/DxD,QAAAI,uBAAAJ,SACAC,SAAAG,uBAAAH","file":"index.js","sourcesContent":["import $ from 'jQuery';\nimport loading from 'loading';\nimport 'emby-button';\nimport 'emby-select';\n\nfunction loadPage(page, config, languageOptions) {\n    $('#selectLocalizationLanguage', page).html(languageOptions.map(function (l) {\n        return '<option value=\"' + l.Value + '\">' + l.Name + '</option>';\n    })).val(config.UICulture);\n    loading.hide();\n}\n\nfunction save(page) {\n    loading.show();\n    const apiClient = ApiClient;\n    apiClient.getJSON(apiClient.getUrl('Startup/Configuration')).then(function (config) {\n        config.UICulture = $('#selectLocalizationLanguage', page).val();\n        apiClient.ajax({\n            type: 'POST',\n            data: JSON.stringify(config),\n            url: apiClient.getUrl('Startup/Configuration')\n        }).then(function () {\n            Dashboard.navigate('wizarduser.html');\n        });\n    });\n}\n\nfunction onSubmit() {\n    save($(this).parents('.page'));\n    return false;\n}\n\nexport default function (view, params) {\n    $('.wizardStartForm', view).on('submit', onSubmit);\n    view.addEventListener('viewshow', function () {\n        document.querySelector('.skinHeader').classList.add('noHomeButtonHeader');\n        loading.show();\n        const page = this;\n        const apiClient = ApiClient;\n        const promise1 = apiClient.getJSON(apiClient.getUrl('Startup/Configuration'));\n        const promise2 = apiClient.getJSON(apiClient.getUrl('Localization/Options'));\n        Promise.all([promise1, promise2]).then(function (responses) {\n            loadPage(page, responses[0], responses[1]);\n        });\n    });\n    view.addEventListener('viewhide', function () {\n        document.querySelector('.skinHeader').classList.remove('noHomeButtonHeader');\n    });\n}\n"]}