{"version":3,"sources":["controllers/wizard/user/index.js"],"names":["define","_require","_exports","_loading","_globalize","_dashboardcss","_embyInput","_embyButton","_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_getRequireWildcardCache","WeakMap","cache","getApiClient","ApiClient","onUpdateUserComplete","result","console","debug","loading","hide","nextWizardPage","Dashboard","navigate","onSubmit","e","this","querySelector","value","Promise","_resolve","_reject","imported","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","then","_ref","toast","globalize","translate","submit","form","show","apiClient","ajax","type","data","JSON","stringify","Name","Password","url","getUrl","preventDefault","onViewShow","page","getJSON","user","_default","view","params","addEventListener","document","classList","add","remove"],"mappings":"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","file":"index.js","sourcesContent":["import loading from 'loading';\nimport globalize from 'globalize';\nimport 'dashboardcss';\nimport 'emby-input';\nimport 'emby-button';\n\nfunction getApiClient() {\n    return ApiClient;\n}\n\nfunction nextWizardPage() {\n    Dashboard.navigate('wizardlibrary.html');\n}\n\nfunction onUpdateUserComplete(result) {\n    console.debug('user update complete: ' + result);\n    loading.hide();\n    nextWizardPage();\n}\n\nfunction submit(form) {\n    loading.show();\n    const apiClient = getApiClient();\n    apiClient.ajax({\n        type: 'POST',\n        data: JSON.stringify({\n            Name: form.querySelector('#txtUsername').value,\n            Password: form.querySelector('#txtManualPassword').value\n        }),\n        url: apiClient.getUrl('Startup/User')\n    }).then(onUpdateUserComplete);\n}\n\nfunction onSubmit(e) {\n    const form = this;\n\n    if (form.querySelector('#txtManualPassword').value != form.querySelector('#txtPasswordConfirm').value) {\n        import('toast').then(({default: toast}) => {\n            toast(globalize.translate('PasswordMatchError'));\n        });\n    } else {\n        submit(form);\n    }\n\n    e.preventDefault();\n    return false;\n}\n\nfunction onViewShow() {\n    loading.show();\n    const page = this;\n    const apiClient = getApiClient();\n    apiClient.getJSON(apiClient.getUrl('Startup/User')).then(function (user) {\n        page.querySelector('#txtUsername').value = user.Name || '';\n        page.querySelector('#txtManualPassword').value = user.Password || '';\n        loading.hide();\n    });\n}\n\nexport default function (view, params) {\n    view.querySelector('.wizardUserForm').addEventListener('submit', onSubmit);\n    view.addEventListener('viewshow', function () {\n        document.querySelector('.skinHeader').classList.add('noHomeButtonHeader');\n    });\n    view.addEventListener('viewhide', function () {\n        document.querySelector('.skinHeader').classList.remove('noHomeButtonHeader');\n    });\n    view.addEventListener('viewshow', onViewShow);\n}\n"]}