define(["exports","globalize","loading","libraryMenu","emby-checkbox","emby-button"],(function(_exports,_globalize,_loading,_libraryMenu,_embyCheckbox,_embyButton){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getTabs(){return[{href:"library.html",name:_globalize.default.translate("HeaderLibraries")},{href:"librarydisplay.html",name:_globalize.default.translate("Display")},{href:"metadataimages.html",name:_globalize.default.translate("Metadata")},{href:"metadatanfo.html",name:_globalize.default.translate("TabNfoSettings")}]}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=function _default(view,params){view.querySelector("form").addEventListener("submit",(function(e){_loading.default.show();var form=this;return ApiClient.getServerConfiguration().then((function(config){config.EnableFolderView=form.querySelector(".chkFolderView").checked,config.EnableGroupingIntoCollections=form.querySelector(".chkGroupMoviesIntoCollections").checked,config.DisplaySpecialsWithinSeasons=form.querySelector(".chkDisplaySpecialsWithinSeasons").checked,config.EnableExternalContentInSuggestions=form.querySelector(".chkExternalContentInSuggestions").checked,config.SaveMetadataHidden=form.querySelector("#chkSaveMetadataHidden").checked,ApiClient.updateServerConfiguration(config).then(Dashboard.processServerConfigurationUpdateResult)})),ApiClient.getNamedConfiguration("metadata").then((function(config){config.UseFileCreationTimeForDateAdded="1"===$("#selectDateAdded",form).val(),ApiClient.updateNamedConfiguration("metadata",config)})),e.preventDefault(),_loading.default.hide(),!1})),view.addEventListener("viewshow",(function(){_libraryMenu.default.setTabs("librarysetup",1,getTabs),function loadData(){ApiClient.getServerConfiguration().then((function(config){view.querySelector(".chkFolderView").checked=config.EnableFolderView,view.querySelector(".chkGroupMoviesIntoCollections").checked=config.EnableGroupingIntoCollections,view.querySelector(".chkDisplaySpecialsWithinSeasons").checked=config.DisplaySpecialsWithinSeasons,view.querySelector(".chkExternalContentInSuggestions").checked=config.EnableExternalContentInSuggestions,view.querySelector("#chkSaveMetadataHidden").checked=config.SaveMetadataHidden})),ApiClient.getNamedConfiguration("metadata").then((function(metadata){view.querySelector("#selectDateAdded").selectedIndex=metadata.UseFileCreationTimeForDateAdded?1:0}))}(),ApiClient.getSystemInfo().then((function(info){"Windows"===info.OperatingSystem?view.querySelector(".fldSaveMetadataHidden").classList.remove("hide"):view.querySelector(".fldSaveMetadataHidden").classList.add("hide")}))}))},_globalize=_interopRequireDefault(_globalize),_loading=_interopRequireDefault(_loading),_libraryMenu=_interopRequireDefault(_libraryMenu)}));
//# sourceMappingURL=librarydisplay.js.map
