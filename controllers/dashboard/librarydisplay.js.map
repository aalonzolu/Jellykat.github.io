{"version":3,"sources":["controllers/dashboard/librarydisplay.js"],"names":["define","_exports","_globalize","_loading","_libraryMenu","_embyCheckbox","_embyButton","_interopRequireDefault","obj","__esModule","default","getTabs","href","name","globalize","translate","Object","defineProperty","value","_default","view","params","querySelector","addEventListener","e","loading","show","form","this","ApiClient","getServerConfiguration","then","config","EnableFolderView","checked","EnableGroupingIntoCollections","DisplaySpecialsWithinSeasons","EnableExternalContentInSuggestions","SaveMetadataHidden","updateServerConfiguration","Dashboard","processServerConfigurationUpdateResult","getNamedConfiguration","UseFileCreationTimeForDateAdded","$","val","updateNamedConfiguration","preventDefault","hide","libraryMenu","setTabs","loadData","metadata","selectedIndex","getSystemInfo","info","OperatingSystem","classList","remove","add"],"mappings":"AAAAA,OAAO,CAAC,UAAW,YAAa,UAAW,cAAe,gBAAiB,gBAAgB,SAAUC,SAAUC,WAAYC,SAAUC,aAAcC,cAAeC,aAChK,aAUA,SAASC,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEE,QAASF,KAHrF,SAASG,UACL,MAAO,CAAC,CACJC,KAAM,eACNC,KAAMC,WAAAA,QAAUC,UAAU,oBAC3B,CACCH,KAAM,sBACNC,KAAMC,WAAAA,QAAUC,UAAU,YAC3B,CACCH,KAAM,sBACNC,KAAMC,WAAAA,QAAUC,UAAU,aAC3B,CACCH,KAAM,mBACNC,KAAMC,WAAAA,QAAUC,UAAU,oBAjBpCC,OAAOC,eAAehB,SAAU,aAAc,CAC5CiB,OAAO,IAETjB,SAASS,QAkBQ,SAAAS,SAASC,KAAMC,QAc1BD,KAAKE,cAAc,QAAQC,iBAAiB,UAAU,SAASC,GAC3DC,SAAAA,QAAQC,OACR,IAAMC,KAAOC,KAgBb,OAfAC,UAAUC,yBAAyBC,MAAK,SAASC,QAC7CA,OAAOC,iBAAmBN,KAAKL,cAAc,kBAAkBY,QAC/DF,OAAOG,8BAAgCR,KAAKL,cAAc,kCAAkCY,QAC5FF,OAAOI,6BAA+BT,KAAKL,cAAc,oCAAoCY,QAC7FF,OAAOK,mCAAqCV,KAAKL,cAAc,oCAAoCY,QACnGF,OAAOM,mBAAqBX,KAAKL,cAAc,0BAA0BY,QACzEL,UAAUU,0BAA0BP,QAAQD,KAAKS,UAAUC,2CAE/DZ,UAAUa,sBAAsB,YAAYX,MAAK,SAASC,QACtDA,OAAOW,gCAAwE,MAAtCC,EAAE,mBAAoBjB,MAAMkB,MACrEhB,UAAUiB,yBAAyB,WAAYd,WAGnDR,EAAEuB,iBACFtB,SAAAA,QAAQuB,QACD,KAGX5B,KAAKG,iBAAiB,YAAY,WAC9B0B,aAAAA,QAAYC,QAAQ,eAAgB,EAAGvC,SAnC3C,SAASwC,WACLtB,UAAUC,yBAAyBC,MAAK,SAASC,QAC7CZ,KAAKE,cAAc,kBAAkBY,QAAUF,OAAOC,iBACtDb,KAAKE,cAAc,kCAAkCY,QAAUF,OAAOG,8BACtEf,KAAKE,cAAc,oCAAoCY,QAAUF,OAAOI,6BACxEhB,KAAKE,cAAc,oCAAoCY,QAAUF,OAAOK,mCACxEjB,KAAKE,cAAc,0BAA0BY,QAAUF,OAAOM,sBAElET,UAAUa,sBAAsB,YAAYX,MAAK,SAASqB,UACtDhC,KAAKE,cAAc,oBAAoB+B,cAAgBD,SAAST,gCAAkC,EAAI,KA2B1GQ,GACAtB,UAAUyB,gBAAgBvB,MAAK,SAASwB,MACP,YAAzBA,KAAKC,gBACLpC,KAAKE,cAAc,0BAA0BmC,UAAUC,OAAO,QAE9DtC,KAAKE,cAAc,0BAA0BmC,UAAUE,IAAI,eAlE/EzD,WAAAK,uBAAAL,YACAC,SAAAI,uBAAAJ,UACAC,aAAAG,uBAAAH","file":"librarydisplay.js","sourcesContent":["import globalize from 'globalize';\nimport loading from 'loading';\nimport libraryMenu from 'libraryMenu';\nimport 'emby-checkbox';\nimport 'emby-button';\n\n/* eslint-disable indent */\n\n    function getTabs() {\n        return [{\n            href: 'library.html',\n            name: globalize.translate('HeaderLibraries')\n        }, {\n            href: 'librarydisplay.html',\n            name: globalize.translate('Display')\n        }, {\n            href: 'metadataimages.html',\n            name: globalize.translate('Metadata')\n        }, {\n            href: 'metadatanfo.html',\n            name: globalize.translate('TabNfoSettings')\n        }];\n    }\n\n    export default function(view, params) {\n        function loadData() {\n            ApiClient.getServerConfiguration().then(function(config) {\n                view.querySelector('.chkFolderView').checked = config.EnableFolderView;\n                view.querySelector('.chkGroupMoviesIntoCollections').checked = config.EnableGroupingIntoCollections;\n                view.querySelector('.chkDisplaySpecialsWithinSeasons').checked = config.DisplaySpecialsWithinSeasons;\n                view.querySelector('.chkExternalContentInSuggestions').checked = config.EnableExternalContentInSuggestions;\n                view.querySelector('#chkSaveMetadataHidden').checked = config.SaveMetadataHidden;\n            });\n            ApiClient.getNamedConfiguration('metadata').then(function(metadata) {\n                view.querySelector('#selectDateAdded').selectedIndex = metadata.UseFileCreationTimeForDateAdded ? 1 : 0;\n            });\n        }\n\n        view.querySelector('form').addEventListener('submit', function(e) {\n            loading.show();\n            const form = this;\n            ApiClient.getServerConfiguration().then(function(config) {\n                config.EnableFolderView = form.querySelector('.chkFolderView').checked;\n                config.EnableGroupingIntoCollections = form.querySelector('.chkGroupMoviesIntoCollections').checked;\n                config.DisplaySpecialsWithinSeasons = form.querySelector('.chkDisplaySpecialsWithinSeasons').checked;\n                config.EnableExternalContentInSuggestions = form.querySelector('.chkExternalContentInSuggestions').checked;\n                config.SaveMetadataHidden = form.querySelector('#chkSaveMetadataHidden').checked;\n                ApiClient.updateServerConfiguration(config).then(Dashboard.processServerConfigurationUpdateResult);\n            });\n            ApiClient.getNamedConfiguration('metadata').then(function(config) {\n                config.UseFileCreationTimeForDateAdded = $('#selectDateAdded', form).val() === '1';\n                ApiClient.updateNamedConfiguration('metadata', config);\n            });\n\n            e.preventDefault();\n            loading.hide();\n            return false;\n        });\n\n        view.addEventListener('viewshow', function() {\n            libraryMenu.setTabs('librarysetup', 1, getTabs);\n            loadData();\n            ApiClient.getSystemInfo().then(function(info) {\n                if (info.OperatingSystem === 'Windows') {\n                    view.querySelector('.fldSaveMetadataHidden').classList.remove('hide');\n                } else {\n                    view.querySelector('.fldSaveMetadataHidden').classList.add('hide');\n                }\n            });\n        });\n    }\n\n/* eslint-enable indent */\n"]}