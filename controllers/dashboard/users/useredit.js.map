{"version":3,"sources":["controllers/dashboard/users/useredit.js"],"names":["define","_require","_jQuery","_loading","_libraryMenu","_globalize","_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_getRequireWildcardCache","WeakMap","cache","_createForOfIteratorHelper","o","allowArrayLike","it","Array","isArray","_unsupportedIterableToArray","minLen","_arrayLikeToArray","n","Object","toString","call","slice","name","from","test","length","i","F","s","done","value","e","_e","f","TypeError","err","normalCompletion","didErr","step","next","_e2","return","arr","len","arr2","loadUser","page","user","ApiClient","getJSON","getUrl","then","providers","loadAuthProviders","querySelector","classList","remove","add","currentProviderId","Policy","AuthenticationProviderId","innerHTML","map","provider","selected","Id","Name","loadPasswordResetProviders","PasswordResetProviderId","IsHidden","folders","loadDeleteFolders","mediaFolders","SupportsMediaDeletion","channelsResult","checkedAttribute","_step","html","_iterator","folder","EnableContentDeletion","EnableContentDeletionFromFolders","indexOf","_step2","_iterator2","Items","trigger","prop","IsDisabled","show","hide","removeAttr","attr","libraryMenu","setTitle","val","IsAdministrator","EnableSharedDeviceControl","EnableRemoteControlOfOtherUsers","EnableContentDownloading","EnableLiveTvManagement","EnableLiveTvAccess","EnableMediaPlayback","EnableAudioPlaybackTranscoding","EnableVideoPlaybackTranscoding","EnablePlaybackRemuxing","ForceRemoteSourceTranscoding","EnableRemoteAccess","EnableSyncTranscoding","EnableMediaConversion","EnablePublicSharing","RemoteClientBitrateLimit","LoginAttemptsBeforeLockout","isMinServerVersion","SyncPlayAccess","loading","onSaveComplete","Dashboard","navigate","Promise","_resolve","_reject","imported","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","desc","set","_ref","toast","globalize","translate","onSubmit","this","parents","getUser","result","saveUser","is","parseInt","parseFloat","filter","c","checked","getAttribute","updateUser","updateUserPolicy","userId","getParameterByName","document","on","off","getServerConfiguration","config","loadData"],"mappings":"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","file":"useredit.js","sourcesContent":["import $ from 'jQuery';\nimport loading from 'loading';\nimport libraryMenu from 'libraryMenu';\nimport globalize from 'globalize';\n\n/* eslint-disable indent */\n\n    function loadDeleteFolders(page, user, mediaFolders) {\n        ApiClient.getJSON(ApiClient.getUrl('Channels', {\n            SupportsMediaDeletion: true\n        })).then(function (channelsResult) {\n            let isChecked;\n            let checkedAttribute;\n            let html = '';\n\n            for (const folder of mediaFolders) {\n                isChecked = user.Policy.EnableContentDeletion || user.Policy.EnableContentDeletionFromFolders.indexOf(folder.Id) != -1;\n                checkedAttribute = isChecked ? ' checked=\"checked\"' : '';\n                html += '<label><input type=\"checkbox\" is=\"emby-checkbox\" class=\"chkFolder\" data-id=\"' + folder.Id + '\" ' + checkedAttribute + '><span>' + folder.Name + '</span></label>';\n            }\n\n            for (const folder of channelsResult.Items) {\n                isChecked = user.Policy.EnableContentDeletion || user.Policy.EnableContentDeletionFromFolders.indexOf(folder.Id) != -1;\n                checkedAttribute = isChecked ? ' checked=\"checked\"' : '';\n                html += '<label><input type=\"checkbox\" is=\"emby-checkbox\" class=\"chkFolder\" data-id=\"' + folder.Id + '\" ' + checkedAttribute + '><span>' + folder.Name + '</span></label>';\n            }\n\n            $('.deleteAccess', page).html(html).trigger('create');\n            $('#chkEnableDeleteAllFolders', page).prop('checked', user.Policy.EnableContentDeletion);\n        });\n    }\n\n    function loadAuthProviders(page, user, providers) {\n        if (providers.length > 1) {\n            page.querySelector('.fldSelectLoginProvider').classList.remove('hide');\n        } else {\n            page.querySelector('.fldSelectLoginProvider').classList.add('hide');\n        }\n\n        const currentProviderId = user.Policy.AuthenticationProviderId;\n        page.querySelector('.selectLoginProvider').innerHTML = providers.map(function (provider) {\n            const selected = provider.Id === currentProviderId || providers.length < 2 ? ' selected' : '';\n            return '<option value=\"' + provider.Id + '\"' + selected + '>' + provider.Name + '</option>';\n        });\n    }\n\n    function loadPasswordResetProviders(page, user, providers) {\n        if (providers.length > 1) {\n            page.querySelector('.fldSelectPasswordResetProvider').classList.remove('hide');\n        } else {\n            page.querySelector('.fldSelectPasswordResetProvider').classList.add('hide');\n        }\n\n        const currentProviderId = user.Policy.PasswordResetProviderId;\n        page.querySelector('.selectPasswordResetProvider').innerHTML = providers.map(function (provider) {\n            const selected = provider.Id === currentProviderId || providers.length < 2 ? ' selected' : '';\n            return '<option value=\"' + provider.Id + '\"' + selected + '>' + provider.Name + '</option>';\n        });\n    }\n\n    function loadUser(page, user) {\n        ApiClient.getJSON(ApiClient.getUrl('Auth/Providers')).then(function (providers) {\n            loadAuthProviders(page, user, providers);\n        });\n        ApiClient.getJSON(ApiClient.getUrl('Auth/PasswordResetProviders')).then(function (providers) {\n            loadPasswordResetProviders(page, user, providers);\n        });\n        ApiClient.getJSON(ApiClient.getUrl('Library/MediaFolders', {\n            IsHidden: false\n        })).then(function (folders) {\n            loadDeleteFolders(page, user, folders.Items);\n        });\n\n        if (user.Policy.IsDisabled) {\n            $('.disabledUserBanner', page).show();\n        } else {\n            $('.disabledUserBanner', page).hide();\n        }\n\n        $('#txtUserName', page).prop('disabled', '').removeAttr('disabled');\n        $('#fldConnectInfo', page).show();\n        $('.lnkEditUserPreferences', page).attr('href', 'mypreferencesmenu.html?userId=' + user.Id);\n        libraryMenu.setTitle(user.Name);\n        page.querySelector('.username').innerHTML = user.Name;\n        $('#txtUserName', page).val(user.Name);\n        $('#chkIsAdmin', page).prop('checked', user.Policy.IsAdministrator);\n        $('#chkDisabled', page).prop('checked', user.Policy.IsDisabled);\n        $('#chkIsHidden', page).prop('checked', user.Policy.IsHidden);\n        $('#chkRemoteControlSharedDevices', page).prop('checked', user.Policy.EnableSharedDeviceControl);\n        $('#chkEnableRemoteControlOtherUsers', page).prop('checked', user.Policy.EnableRemoteControlOfOtherUsers);\n        $('#chkEnableDownloading', page).prop('checked', user.Policy.EnableContentDownloading);\n        $('#chkManageLiveTv', page).prop('checked', user.Policy.EnableLiveTvManagement);\n        $('#chkEnableLiveTvAccess', page).prop('checked', user.Policy.EnableLiveTvAccess);\n        $('#chkEnableMediaPlayback', page).prop('checked', user.Policy.EnableMediaPlayback);\n        $('#chkEnableAudioPlaybackTranscoding', page).prop('checked', user.Policy.EnableAudioPlaybackTranscoding);\n        $('#chkEnableVideoPlaybackTranscoding', page).prop('checked', user.Policy.EnableVideoPlaybackTranscoding);\n        $('#chkEnableVideoPlaybackRemuxing', page).prop('checked', user.Policy.EnablePlaybackRemuxing);\n        $('#chkForceRemoteSourceTranscoding', page).prop('checked', user.Policy.ForceRemoteSourceTranscoding);\n        $('#chkRemoteAccess', page).prop('checked', user.Policy.EnableRemoteAccess == null || user.Policy.EnableRemoteAccess);\n        $('#chkEnableSyncTranscoding', page).prop('checked', user.Policy.EnableSyncTranscoding);\n        $('#chkEnableConversion', page).prop('checked', user.Policy.EnableMediaConversion || false);\n        $('#chkEnableSharing', page).prop('checked', user.Policy.EnablePublicSharing);\n        $('#txtRemoteClientBitrateLimit', page).val(user.Policy.RemoteClientBitrateLimit / 1e6 || '');\n        $('#txtLoginAttemptsBeforeLockout', page).val(user.Policy.LoginAttemptsBeforeLockout || '0');\n        if (ApiClient.isMinServerVersion('10.6.0')) {\n            $('#selectSyncPlayAccess').val(user.Policy.SyncPlayAccess);\n        }\n        loading.hide();\n    }\n\n    function onSaveComplete(page, user) {\n        Dashboard.navigate('userprofiles.html');\n        loading.hide();\n\n        import('toast').then(({default: toast}) => {\n            toast(globalize.translate('SettingsSaved'));\n        });\n    }\n\n    function saveUser(user, page) {\n        user.Name = $('#txtUserName', page).val();\n        user.Policy.IsAdministrator = $('#chkIsAdmin', page).is(':checked');\n        user.Policy.IsHidden = $('#chkIsHidden', page).is(':checked');\n        user.Policy.IsDisabled = $('#chkDisabled', page).is(':checked');\n        user.Policy.EnableRemoteControlOfOtherUsers = $('#chkEnableRemoteControlOtherUsers', page).is(':checked');\n        user.Policy.EnableLiveTvManagement = $('#chkManageLiveTv', page).is(':checked');\n        user.Policy.EnableLiveTvAccess = $('#chkEnableLiveTvAccess', page).is(':checked');\n        user.Policy.EnableSharedDeviceControl = $('#chkRemoteControlSharedDevices', page).is(':checked');\n        user.Policy.EnableMediaPlayback = $('#chkEnableMediaPlayback', page).is(':checked');\n        user.Policy.EnableAudioPlaybackTranscoding = $('#chkEnableAudioPlaybackTranscoding', page).is(':checked');\n        user.Policy.EnableVideoPlaybackTranscoding = $('#chkEnableVideoPlaybackTranscoding', page).is(':checked');\n        user.Policy.EnablePlaybackRemuxing = $('#chkEnableVideoPlaybackRemuxing', page).is(':checked');\n        user.Policy.ForceRemoteSourceTranscoding = $('#chkForceRemoteSourceTranscoding', page).is(':checked');\n        user.Policy.EnableContentDownloading = $('#chkEnableDownloading', page).is(':checked');\n        user.Policy.EnableSyncTranscoding = $('#chkEnableSyncTranscoding', page).is(':checked');\n        user.Policy.EnableMediaConversion = $('#chkEnableConversion', page).is(':checked');\n        user.Policy.EnablePublicSharing = $('#chkEnableSharing', page).is(':checked');\n        user.Policy.EnableRemoteAccess = $('#chkRemoteAccess', page).is(':checked');\n        user.Policy.RemoteClientBitrateLimit = parseInt(1e6 * parseFloat($('#txtRemoteClientBitrateLimit', page).val() || '0'));\n        user.Policy.LoginAttemptsBeforeLockout = parseInt($('#txtLoginAttemptsBeforeLockout', page).val() || '0');\n        user.Policy.AuthenticationProviderId = page.querySelector('.selectLoginProvider').value;\n        user.Policy.PasswordResetProviderId = page.querySelector('.selectPasswordResetProvider').value;\n        user.Policy.EnableContentDeletion = $('#chkEnableDeleteAllFolders', page).is(':checked');\n        user.Policy.EnableContentDeletionFromFolders = user.Policy.EnableContentDeletion ? [] : $('.chkFolder', page).get().filter(function (c) {\n            return c.checked;\n        }).map(function (c) {\n            return c.getAttribute('data-id');\n        });\n        if (ApiClient.isMinServerVersion('10.6.0')) {\n            user.Policy.SyncPlayAccess = page.querySelector('#selectSyncPlayAccess').value;\n        }\n        ApiClient.updateUser(user).then(function () {\n            ApiClient.updateUserPolicy(user.Id, user.Policy).then(function () {\n                onSaveComplete(page, user);\n            });\n        });\n    }\n\n    function onSubmit() {\n        const page = $(this).parents('.page')[0];\n        loading.show();\n        getUser().then(function (result) {\n            saveUser(result, page);\n        });\n        return false;\n    }\n\n    function getUser() {\n        const userId = getParameterByName('userId');\n        return ApiClient.getUser(userId);\n    }\n\n    function loadData(page) {\n        loading.show();\n        getUser().then(function (user) {\n            loadUser(page, user);\n        });\n    }\n\n    $(document).on('pageinit', '#editUserPage', function () {\n        $('.editUserProfileForm').off('submit', onSubmit).on('submit', onSubmit);\n        this.querySelector('.sharingHelp').innerHTML = globalize.translate('OptionAllowLinkSharingHelp', 30);\n        const page = this;\n        $('#chkEnableDeleteAllFolders', this).on('change', function () {\n            if (this.checked) {\n                $('.deleteAccess', page).hide();\n            } else {\n                $('.deleteAccess', page).show();\n            }\n        });\n        ApiClient.getServerConfiguration().then(function (config) {\n            if (config.EnableRemoteAccess) {\n                page.querySelector('.fldRemoteAccess').classList.remove('hide');\n            } else {\n                page.querySelector('.fldRemoteAccess').classList.add('hide');\n            }\n        });\n    }).on('pagebeforeshow', '#editUserPage', function () {\n        loadData(this);\n    });\n\n/* eslint-enable indent */\n"]}