define(["exports","loading","libraryMenu","globalize","cardStyle","emby-button","emby-checkbox","emby-select"],(function(_exports,_loading,_libraryMenu,_globalize,_cardStyle,_embyButton,_embyCheckbox,_embySelect){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getPluginHtml(plugin,options,installedPlugins){var html="",href=plugin.externalUrl?plugin.externalUrl:"addplugin.html?name="+encodeURIComponent(plugin.name)+"&guid="+plugin.guid;options.context&&(href+="&context="+options.context),html+="<div class='card backdropCard'>",html+='<div class="cardBox visualCardBox">',html+='<div class="cardScalable visualCardBox-cardScalable">',html+='<div class="cardPadder cardPadder-backdrop"></div>',html+='<a class="cardContent cardImageContainer" is="emby-linkbutton" href="'+href+'"'+(plugin.externalUrl?' target="_blank"':"")+">",html+='<span class="cardImageIcon material-icons folder"></span>',html+="</a>",html+="</div>",html+='<div class="cardFooter">',html+="<div class='cardText'>",html+=plugin.name,html+="</div>";var installedPlugin=installedPlugins.filter((function(ip){return ip.Id==plugin.guid}))[0];return html+="<div class='cardText cardText-secondary'>",html+=installedPlugin?_globalize.default.translate("LabelVersionInstalled",installedPlugin.Version):"&nbsp;",html+="</div>",html+="</div>",(html+="</div>")+"</div>"}function getTabs(){return[{href:"installedplugins.html",name:_globalize.default.translate("TabMyPlugins")},{href:"availableplugins.html",name:_globalize.default.translate("TabCatalog")},{href:"repositories.html",name:_globalize.default.translate("TabRepositories")}]}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=function _default(view){view.addEventListener("viewshow",(function(){_libraryMenu.default.setTabs("plugins",1,getTabs),function reloadList(page){_loading.default.show();var promise1=ApiClient.getAvailablePlugins(),promise2=ApiClient.getInstalledPlugins();Promise.all([promise1,promise2]).then((function(responses){!function populateList(options){var availablePlugins=options.availablePlugins,installedPlugins=options.installedPlugins;availablePlugins.forEach((function(plugin,index,array){plugin.category=plugin.category||"General",plugin.categoryDisplayName=function getHeaderText(category){"Channel"===(category=category.replace(" ",""))?category="Channels":"Theme"===category?category="Themes":"LiveTV"===category?category="LiveTV":"ScreenSaver"===category&&(category="HeaderScreenSavers");return _globalize.default.translate(category)}(plugin.category),array[index]=plugin})),availablePlugins.sort((function(a,b){return a.category>b.category?1:b.category>a.category?-1:a.name>b.name?1:b.name>a.name?-1:0}));for(var currentCategory=null,html="",i=0;i<availablePlugins.length;i++){var plugin=availablePlugins[i],category=plugin.categoryDisplayName;category!=currentCategory&&(currentCategory&&(html+="</div>",html+="</div>"),html+='<div class="verticalSection">',html+='<h2 class="sectionTitle sectionTitle-cards">'+category+"</h2>",html+='<div class="itemsContainer vertical-wrap">',currentCategory=category),html+=getPluginHtml(plugin,options,installedPlugins)}html+="</div>",html+="</div>",!availablePlugins.length&&options.noItemsElement&&options.noItemsElement.classList.remove("hide");options.catalogElement.innerHTML=html,_loading.default.hide()}({catalogElement:page.querySelector("#pluginTiles"),noItemsElement:page.querySelector("#noPlugins"),availablePlugins:responses[0],installedPlugins:responses[1]})}))}(this)}))},_loading=_interopRequireDefault(_loading),_libraryMenu=_interopRequireDefault(_libraryMenu),_globalize=_interopRequireDefault(_globalize)}));
//# sourceMappingURL=index.js.map
