{"version":3,"sources":["controllers/dashboard/dlna/profiles.js"],"names":["define","_require","_jQuery","_globalize","_loading","_libraryMenu","_listViewStyle","_embyButton","_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_getRequireWildcardCache","WeakMap","cache","loadProfiles","page","loading","show","ApiClient","getJSON","getUrl","then","result","renderUserProfiles","profiles","renderProfiles","querySelector","filter","p","Type","renderSystemProfiles","hide","element","html","length","i","profile","Id","Name","globalize","translate","innerHTML","on","id","this","getAttribute","deleteProfile","Promise","_resolve","_reject","imported","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_ref","confirm","ajax","type","url","getTabs","href","name","document","libraryMenu","setTabs"],"mappings":"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","file":"profiles.js","sourcesContent":["import $ from 'jQuery';\nimport globalize from 'globalize';\nimport loading from 'loading';\nimport libraryMenu from 'libraryMenu';\nimport 'listViewStyle';\nimport 'emby-button';\n\n/* eslint-disable indent */\n\n    function loadProfiles(page) {\n        loading.show();\n        ApiClient.getJSON(ApiClient.getUrl('Dlna/ProfileInfos')).then(function (result) {\n            renderUserProfiles(page, result);\n            renderSystemProfiles(page, result);\n            loading.hide();\n        });\n    }\n\n    function renderUserProfiles(page, profiles) {\n        renderProfiles(page, page.querySelector('.customProfiles'), profiles.filter(function (p) {\n            return p.Type == 'User';\n        }));\n    }\n\n    function renderSystemProfiles(page, profiles) {\n        renderProfiles(page, page.querySelector('.systemProfiles'), profiles.filter(function (p) {\n            return p.Type == 'System';\n        }));\n    }\n\n    function renderProfiles(page, element, profiles) {\n        let html = '';\n\n        if (profiles.length) {\n            html += '<div class=\"paperList\">';\n        }\n\n        for (let i = 0, length = profiles.length; i < length; i++) {\n            const profile = profiles[i];\n            html += '<div class=\"listItem listItem-border\">';\n            html += '<span class=\"listItemIcon material-icons live_tv\"></span>';\n            html += '<div class=\"listItemBody two-line\">';\n            html += \"<a is='emby-linkbutton' style='padding:0;margin:0;' data-ripple='false' class='clearLink' href='dlnaprofile.html?id=\" + profile.Id + \"'>\";\n            html += '<div>' + profile.Name + '</div>';\n            html += '</a>';\n            html += '</div>';\n\n            if (profile.Type == 'User') {\n                html += '<button type=\"button\" is=\"paper-icon-button-light\" class=\"btnDeleteProfile\" data-profileid=\"' + profile.Id + '\" title=\"' + globalize.translate('Delete') + '\"><span class=\"material-icons delete\"></span></button>';\n            }\n\n            html += '</div>';\n        }\n\n        if (profiles.length) {\n            html += '</div>';\n        }\n\n        element.innerHTML = html;\n        $('.btnDeleteProfile', element).on('click', function () {\n            const id = this.getAttribute('data-profileid');\n            deleteProfile(page, id);\n        });\n    }\n\n    function deleteProfile(page, id) {\n        import('confirm').then(({default: confirm}) => {\n            confirm(globalize.translate('MessageConfirmProfileDeletion'), globalize.translate('HeaderConfirmProfileDeletion')).then(function () {\n                loading.show();\n                ApiClient.ajax({\n                    type: 'DELETE',\n                    url: ApiClient.getUrl('Dlna/Profiles/' + id)\n                }).then(function () {\n                    loading.hide();\n                    loadProfiles(page);\n                });\n            });\n        });\n    }\n\n    function getTabs() {\n        return [{\n            href: 'dlnasettings.html',\n            name: globalize.translate('TabSettings')\n        }, {\n            href: 'dlnaprofiles.html',\n            name: globalize.translate('TabProfiles')\n        }];\n    }\n\n    $(document).on('pageshow', '#dlnaProfilesPage', function () {\n        libraryMenu.setTabs('dlna', 1, getTabs);\n        loadProfiles(this);\n    });\n\n/* eslint-enable indent */\n"]}