define(["jQuery","loading","libraryMenu","globalize"],(function(_jQuery,_loading,_libraryMenu,_globalize){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function onSubmit(){_loading.default.show();var form=this;return ApiClient.getNamedConfiguration("dlna").then((function(config){config.EnablePlayTo=form.querySelector("#chkEnablePlayTo").checked,config.EnableDebugLog=form.querySelector("#chkEnableDlnaDebugLogging").checked,config.ClientDiscoveryIntervalSeconds=(0,_jQuery.default)("#txtClientDiscoveryInterval",form).val(),config.EnableServer=(0,_jQuery.default)("#chkEnableServer",form).is(":checked"),config.BlastAliveMessages=(0,_jQuery.default)("#chkBlastAliveMessages",form).is(":checked"),config.BlastAliveMessageIntervalSeconds=(0,_jQuery.default)("#txtBlastInterval",form).val(),config.DefaultUserId=(0,_jQuery.default)("#selectUser",form).val(),ApiClient.updateNamedConfiguration("dlna",config).then(Dashboard.processServerConfigurationUpdateResult)})),!1}function getTabs(){return[{href:"dlnasettings.html",name:_globalize.default.translate("TabSettings")},{href:"dlnaprofiles.html",name:_globalize.default.translate("TabProfiles")}]}_jQuery=_interopRequireDefault(_jQuery),_loading=_interopRequireDefault(_loading),_libraryMenu=_interopRequireDefault(_libraryMenu),_globalize=_interopRequireDefault(_globalize),(0,_jQuery.default)(document).on("pageinit","#dlnaSettingsPage",(function(){(0,_jQuery.default)(".dlnaSettingsForm").off("submit",onSubmit).on("submit",onSubmit)})).on("pageshow","#dlnaSettingsPage",(function(){_libraryMenu.default.setTabs("dlna",0,getTabs),_loading.default.show();var page=this,promise1=ApiClient.getNamedConfiguration("dlna"),promise2=ApiClient.getUsers();Promise.all([promise1,promise2]).then((function(responses){!function loadPage(page,config,users){page.querySelector("#chkEnablePlayTo").checked=config.EnablePlayTo,page.querySelector("#chkEnableDlnaDebugLogging").checked=config.EnableDebugLog,(0,_jQuery.default)("#txtClientDiscoveryInterval",page).val(config.ClientDiscoveryIntervalSeconds),(0,_jQuery.default)("#chkEnableServer",page).prop("checked",config.EnableServer),(0,_jQuery.default)("#chkBlastAliveMessages",page).prop("checked",config.BlastAliveMessages),(0,_jQuery.default)("#txtBlastInterval",page).val(config.BlastAliveMessageIntervalSeconds);var usersHtml=users.map((function(u){return'<option value="'+u.Id+'">'+u.Name+"</option>"})).join("");(0,_jQuery.default)("#selectUser",page).html(usersHtml).val(config.DefaultUserId||""),_loading.default.hide()}(page,responses[0],responses[1])}))}))}));
//# sourceMappingURL=settings.js.map
