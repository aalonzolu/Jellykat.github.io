{"version":3,"sources":["controllers/dashboard/dlna/settings.js"],"names":["define","_jQuery","_loading","_libraryMenu","_globalize","_interopRequireDefault","obj","__esModule","default","onSubmit","loading","show","form","this","ApiClient","getNamedConfiguration","then","config","EnablePlayTo","querySelector","checked","EnableDebugLog","ClientDiscoveryIntervalSeconds","val","EnableServer","is","BlastAliveMessages","BlastAliveMessageIntervalSeconds","DefaultUserId","updateNamedConfiguration","Dashboard","processServerConfigurationUpdateResult","getTabs","href","name","globalize","translate","document","on","off","libraryMenu","setTabs","page","promise1","promise2","getUsers","Promise","all","responses","loadPage","users","prop","usersHtml","map","u","Id","Name","join","html","hide"],"mappings":"AAAAA,OAAO,CAAC,SAAU,UAAW,cAAe,cAAc,SAAUC,QAASC,SAAUC,aAAcC,YACnG,aAOA,SAASC,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEE,QAASF,KAarF,SAASG,WACLC,SAAAA,QAAQC,OACR,IAAMC,KAAOC,KAWb,OAVAC,UAAUC,sBAAsB,QAAQC,MAAK,SAAUC,QACnDA,OAAOC,aAAeN,KAAKO,cAAc,oBAAoBC,QAC7DH,OAAOI,eAAiBT,KAAKO,cAAc,8BAA8BC,QACzEH,OAAOK,gCAAiC,EAAArB,QAAAO,SAAE,8BAA+BI,MAAMW,MAC/EN,OAAOO,cAAe,EAAAvB,QAAAO,SAAE,mBAAoBI,MAAMa,GAAG,YACrDR,OAAOS,oBAAqB,EAAAzB,QAAAO,SAAE,yBAA0BI,MAAMa,GAAG,YACjER,OAAOU,kCAAmC,EAAA1B,QAAAO,SAAE,oBAAqBI,MAAMW,MACvEN,OAAOW,eAAgB,EAAA3B,QAAAO,SAAE,cAAeI,MAAMW,MAC9CT,UAAUe,yBAAyB,OAAQZ,QAAQD,KAAKc,UAAUC,4CAE/D,EAGX,SAASC,UACL,MAAO,CAAC,CACJC,KAAM,oBACNC,KAAMC,WAAAA,QAAUC,UAAU,gBAC3B,CACCH,KAAM,oBACNC,KAAMC,WAAAA,QAAUC,UAAU,iBA3CtCnC,QAAAI,uBAAAJ,SACAC,SAAAG,uBAAAH,UACAC,aAAAE,uBAAAF,cACAC,WAAAC,uBAAAD,aA4CI,EAAAH,QAAAO,SAAE6B,UAAUC,GAAG,WAAY,qBAAqB,YAC5C,EAAArC,QAAAO,SAAE,qBAAqB+B,IAAI,SAAU9B,UAAU6B,GAAG,SAAU7B,aAC7D6B,GAAG,WAAY,qBAAqB,WACnCE,aAAAA,QAAYC,QAAQ,OAAQ,EAAGT,SAC/BtB,SAAAA,QAAQC,OACR,IAAM+B,KAAO7B,KACP8B,SAAW7B,UAAUC,sBAAsB,QAC3C6B,SAAW9B,UAAU+B,WAC3BC,QAAQC,IAAI,CAACJ,SAAUC,WAAW5B,MAAK,SAAUgC,YAhDrD,SAASC,SAASP,KAAMzB,OAAQiC,OAC5BR,KAAKvB,cAAc,oBAAoBC,QAAUH,OAAOC,aACxDwB,KAAKvB,cAAc,8BAA8BC,QAAUH,OAAOI,gBAClE,EAAApB,QAAAO,SAAE,8BAA+BkC,MAAMnB,IAAIN,OAAOK,iCAClD,EAAArB,QAAAO,SAAE,mBAAoBkC,MAAMS,KAAK,UAAWlC,OAAOO,eACnD,EAAAvB,QAAAO,SAAE,yBAA0BkC,MAAMS,KAAK,UAAWlC,OAAOS,qBACzD,EAAAzB,QAAAO,SAAE,oBAAqBkC,MAAMnB,IAAIN,OAAOU,kCACxC,IAAMyB,UAAYF,MAAMG,KAAI,SAAUC,GAClC,MAAO,kBAAoBA,EAAEC,GAAK,KAAOD,EAAEE,KAAO,eACnDC,KAAK,KACR,EAAAxD,QAAAO,SAAE,cAAekC,MAAMgB,KAAKN,WAAW7B,IAAIN,OAAOW,eAAiB,IACnElB,SAAAA,QAAQiD,OAsCJV,CAASP,KAAMM,UAAU,GAAIA,UAAU","file":"settings.js","sourcesContent":["import $ from 'jQuery';\nimport loading from 'loading';\nimport libraryMenu from 'libraryMenu';\nimport globalize from 'globalize';\n\n/* eslint-disable indent */\n\n    function loadPage(page, config, users) {\n        page.querySelector('#chkEnablePlayTo').checked = config.EnablePlayTo;\n        page.querySelector('#chkEnableDlnaDebugLogging').checked = config.EnableDebugLog;\n        $('#txtClientDiscoveryInterval', page).val(config.ClientDiscoveryIntervalSeconds);\n        $('#chkEnableServer', page).prop('checked', config.EnableServer);\n        $('#chkBlastAliveMessages', page).prop('checked', config.BlastAliveMessages);\n        $('#txtBlastInterval', page).val(config.BlastAliveMessageIntervalSeconds);\n        const usersHtml = users.map(function (u) {\n            return '<option value=\"' + u.Id + '\">' + u.Name + '</option>';\n        }).join('');\n        $('#selectUser', page).html(usersHtml).val(config.DefaultUserId || '');\n        loading.hide();\n    }\n\n    function onSubmit() {\n        loading.show();\n        const form = this;\n        ApiClient.getNamedConfiguration('dlna').then(function (config) {\n            config.EnablePlayTo = form.querySelector('#chkEnablePlayTo').checked;\n            config.EnableDebugLog = form.querySelector('#chkEnableDlnaDebugLogging').checked;\n            config.ClientDiscoveryIntervalSeconds = $('#txtClientDiscoveryInterval', form).val();\n            config.EnableServer = $('#chkEnableServer', form).is(':checked');\n            config.BlastAliveMessages = $('#chkBlastAliveMessages', form).is(':checked');\n            config.BlastAliveMessageIntervalSeconds = $('#txtBlastInterval', form).val();\n            config.DefaultUserId = $('#selectUser', form).val();\n            ApiClient.updateNamedConfiguration('dlna', config).then(Dashboard.processServerConfigurationUpdateResult);\n        });\n        return false;\n    }\n\n    function getTabs() {\n        return [{\n            href: 'dlnasettings.html',\n            name: globalize.translate('TabSettings')\n        }, {\n            href: 'dlnaprofiles.html',\n            name: globalize.translate('TabProfiles')\n        }];\n    }\n\n    $(document).on('pageinit', '#dlnaSettingsPage', function () {\n        $('.dlnaSettingsForm').off('submit', onSubmit).on('submit', onSubmit);\n    }).on('pageshow', '#dlnaSettingsPage', function () {\n        libraryMenu.setTabs('dlna', 0, getTabs);\n        loading.show();\n        const page = this;\n        const promise1 = ApiClient.getNamedConfiguration('dlna');\n        const promise2 = ApiClient.getUsers();\n        Promise.all([promise1, promise2]).then(function (responses) {\n            loadPage(page, responses[0], responses[1]);\n        });\n    });\n\n/* eslint-enable indent */\n"]}