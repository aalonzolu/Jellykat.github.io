{"version":3,"sources":["controllers/user/menu/index.js"],"names":["define","_require","_exports","_apphost","_listViewStyle","_embyButton","_typeof","obj","Symbol","iterator","constructor","prototype","_getRequireWildcardCache","WeakMap","cache","Object","defineProperty","value","default","_default","view","params","querySelector","addEventListener","Dashboard","logout","selectServer","window","NativeShell","openClientSettings","userId","getCurrentUserId","page","this","setAttribute","AppHost","supports","classList","remove","add","appHost","ApiClient","getUser","then","user","innerHTML","Name","Policy","IsAdministrator","Promise","_resolve","_reject","imported","_interopRequireWildcard","__esModule","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","_ref","autoFocus","_interopRequireDefault"],"mappings":"AAAAA,OAAO,CAAC,UAAW,UAAW,UAAW,gBAAiB,gBAAgB,SAAUC,SAAUC,SAAUC,SAAUC,eAAgBC,aAChI,aAUA,SAASC,QAAQC,KAAmV,OAAtOD,QAArD,mBAAXE,QAAoD,iBAApBA,OAAOC,SAAmC,SAASH,QAAQC,KAAO,cAAcA,KAA2B,SAASD,QAAQC,KAAO,OAAOA,KAAyB,mBAAXC,QAAyBD,IAAIG,cAAgBF,QAAUD,MAAQC,OAAOG,UAAY,gBAAkBJ,MAAyBA,KAEnX,SAASK,2BAA6B,GAAuB,mBAAZC,QAAwB,OAAO,KAAM,IAAIC,MAAQ,IAAID,QAA6F,OAAlFD,yBAA2B,SAASA,2BAA6B,OAAOE,OAAiBA,MAV1MC,OAAOC,eAAed,SAAU,aAAc,CAC5Ce,OAAO,IAETf,SAASgB,QAFI,SAAAC,SAAUC,KAAMC,QAC3BD,KAAKE,cAAc,cAAcC,iBAAiB,SAAS,WACvDC,UAAUC,YAGdL,KAAKE,cAAc,iBAAiBC,iBAAiB,SAAS,WAC1DC,UAAUE,kBAGdN,KAAKE,cAAc,mBAAmBC,iBAAiB,SAAS,WAC5DI,OAAOC,YAAYC,wBAGvBT,KAAKG,iBAAiB,YAAY,WAE9B,IAAMO,OAAST,OAAOS,QAAUN,UAAUO,mBACpCC,KAAOC,KAEbD,KAAKV,cAAc,iBAAiBY,aAAa,OAAQ,yBAA2BJ,QACpFE,KAAKV,cAAc,0BAA0BY,aAAa,OAAQ,oCAAsCJ,QACxGE,KAAKV,cAAc,uBAAuBY,aAAa,OAAQ,iCAAmCJ,QAClGE,KAAKV,cAAc,2BAA2BY,aAAa,OAAQ,qCAAuCJ,QAC1GE,KAAKV,cAAc,2BAA2BY,aAAa,OAAQ,sCAAwCJ,QAEvGH,OAAOC,aAAeD,OAAOC,YAAYO,QAAQC,SAAS,kBAC1DJ,KAAKV,cAAc,mBAAmBe,UAAUC,OAAO,QAEvDN,KAAKV,cAAc,mBAAmBe,UAAUE,IAAI,QAGpDC,SAAAA,QAAQJ,SAAS,eACjBJ,KAAKV,cAAc,iBAAiBe,UAAUC,OAAO,QAErDN,KAAKV,cAAc,iBAAiBe,UAAUE,IAAI,QAIlDlB,OAAOS,QAAUT,OAAOS,SAAWN,UAAUO,mBAC7CC,KAAKV,cAAc,gBAAgBe,UAAUE,IAAI,QACjDP,KAAKV,cAAc,iBAAiBe,UAAUE,IAAI,SAGtDE,UAAUC,QAAQZ,QAAQa,MAAK,SAAUC,MACrCZ,KAAKV,cAAc,mBAAmBuB,UAAYD,KAAKE,KAClDF,KAAKG,OAAOC,iBACbhB,KAAKV,cAAc,iBAAiBe,UAAUE,IAAI,WAI1D,IAAAU,SAAA,SAAAC,SAAAC,SAAA,OAAAlD,SAAA,CAAO,gBAAP,SAAAmD,UAAA,OAAAF,SAtCN,SAASG,wBAAwB9C,KAAO,GAAIA,KAAOA,IAAI+C,WAAc,OAAO/C,IAAO,GAAY,OAARA,KAAiC,WAAjBD,QAAQC,MAAoC,mBAARA,IAAsB,MAAO,CAAEW,QAASX,KAAS,IAAIO,MAAQF,2BAA4B,GAAIE,OAASA,MAAMyC,IAAIhD,KAAQ,OAAOO,MAAM0C,IAAIjD,KAAQ,IAAIkD,OAAS,GAAQC,sBAAwB3C,OAAOC,gBAAkBD,OAAO4C,yBAA0B,IAAK,IAAIC,OAAOrD,IAAO,GAAIQ,OAAOJ,UAAUkD,eAAeC,KAAKvD,IAAKqD,KAAM,CAAE,IAAIG,KAAOL,sBAAwB3C,OAAO4C,yBAAyBpD,IAAKqD,KAAO,KAAUG,OAASA,KAAKP,KAAOO,KAAKC,KAAQjD,OAAOC,eAAeyC,OAAQG,IAAKG,MAAgBN,OAAOG,KAAOrD,IAAIqD,KAAYH,OAAOvC,QAAUX,IAASO,OAASA,MAAMkD,IAAIzD,IAAKkD,QAAW,OAAOA,OAsC1tBJ,CAAAD,aAAAD,YAAsBR,MAAK,SAAAsB,MAA4BA,KAA1B/C,QACbgD,UAAU9C,aAtDlCjB,SASE,SAASgE,uBAAuB5D,KAAO,OAAOA,KAAOA,IAAI+C,WAAa/C,IAAM,CAAEW,QAASX,KATzF4D,CAAAhE","file":"index.js","sourcesContent":["import appHost from 'apphost';\nimport 'listViewStyle';\nimport 'emby-button';\n\nexport default function (view, params) {\n    view.querySelector('.btnLogout').addEventListener('click', function () {\n        Dashboard.logout();\n    });\n\n    view.querySelector('.selectServer').addEventListener('click', function () {\n        Dashboard.selectServer();\n    });\n\n    view.querySelector('.clientSettings').addEventListener('click', function () {\n        window.NativeShell.openClientSettings();\n    });\n\n    view.addEventListener('viewshow', function () {\n        // this page can also be used by admins to change user preferences from the user edit page\n        const userId = params.userId || Dashboard.getCurrentUserId();\n        const page = this;\n\n        page.querySelector('.lnkMyProfile').setAttribute('href', 'myprofile.html?userId=' + userId);\n        page.querySelector('.lnkDisplayPreferences').setAttribute('href', 'mypreferencesdisplay.html?userId=' + userId);\n        page.querySelector('.lnkHomePreferences').setAttribute('href', 'mypreferenceshome.html?userId=' + userId);\n        page.querySelector('.lnkPlaybackPreferences').setAttribute('href', 'mypreferencesplayback.html?userId=' + userId);\n        page.querySelector('.lnkSubtitlePreferences').setAttribute('href', 'mypreferencessubtitles.html?userId=' + userId);\n\n        if (window.NativeShell && window.NativeShell.AppHost.supports('clientsettings')) {\n            page.querySelector('.clientSettings').classList.remove('hide');\n        } else {\n            page.querySelector('.clientSettings').classList.add('hide');\n        }\n\n        if (appHost.supports('multiserver')) {\n            page.querySelector('.selectServer').classList.remove('hide');\n        } else {\n            page.querySelector('.selectServer').classList.add('hide');\n        }\n\n        // hide the actions if user preferences are being edited for a different user\n        if (params.userId && params.userId !== Dashboard.getCurrentUserId) {\n            page.querySelector('.userSection').classList.add('hide');\n            page.querySelector('.adminSection').classList.add('hide');\n        }\n\n        ApiClient.getUser(userId).then(function (user) {\n            page.querySelector('.headerUsername').innerHTML = user.Name;\n            if (!user.Policy.IsAdministrator) {\n                page.querySelector('.adminSection').classList.add('hide');\n            }\n        });\n\n        import('autoFocuser').then(({default: autoFocuser}) => {\n            autoFocuser.autoFocus(view);\n        });\n    });\n}\n"]}