{"version":3,"sources":["scripts/multiDownload.js"],"names":["define","_exports","_browser","download","url","a","document","createElement","href","dispatchEvent","MouseEvent","Object","defineProperty","value","default","_default","urls","Error","fallback","i","createIframe","frame","style","display","src","documentElement","appendChild","interval","setInterval","contentWindow","readyState","clearInterval","setTimeout","parentNode","removeChild","length","delay","forEach","browser","firefox","sameDomain","window","location","hostname","protocol","bind","_interopRequireDefault","obj","__esModule"],"mappings":"AAAAA,OAAO,CAAC,UAAW,YAAY,SAAUC,SAAUC,UACjD,aAmCF,SAASC,SAASC,KACd,IAAIC,EAAIC,SAASC,cAAc,KAC/BF,EAAEF,SAAW,GACbE,EAAEG,KAAOJ,IAETC,EAAEI,cAAc,IAAIC,WAAW,UAtCjCC,OAAOC,eAAeX,SAAU,aAAc,CAC5CY,OAAO,IAETZ,SAASa,QAsCI,SAAAC,SAAUC,MACrB,IAAKA,KACD,MAAM,IAAIC,MAAM,mBAGpB,QAAoD,IAAzCX,SAASC,cAAc,KAAKJ,SACnC,OAhDR,SAASe,SAASF,MACd,IAAIG,EAAI,GAER,SAAUC,eACN,IAAIC,MAAQf,SAASC,cAAc,UACnCc,MAAMC,MAAMC,QAAU,OACtBF,MAAMG,IAAMR,KAAKG,KACjBb,SAASmB,gBAAgBC,YAAYL,OAGrC,IAAIM,SAAWC,aAAY,WACyB,aAA5CP,MAAMQ,cAAcvB,SAASwB,YAAyE,gBAA5CT,MAAMQ,cAAcvB,SAASwB,aACvFC,cAAcJ,UAGdK,YAAW,WACPX,MAAMY,WAAWC,YAAYb,SAC9B,KAECF,EAAIH,KAAKmB,QACTf,kBAGT,KApBP,GA6CWF,CAASF,MAGpB,IAAIoB,MAAQ,EAEZpB,KAAKqB,SAAQ,SAAUjC,KAEnB,GAAIkC,SAAAA,QAAQC,UA5BpB,SAASC,WAAWpC,KAChB,IAAIC,EAAIC,SAASC,cAAc,KAG/B,OAFAF,EAAEG,KAAOJ,IAEFqC,OAAOC,SAASC,WAAatC,EAAEsC,UAAYF,OAAOC,SAASE,WAAavC,EAAEuC,SAwBrDJ,CAAWpC,KAC/B,OAAO4B,WAAW7B,SAAS0C,KAAK,KAAMzC,KAAM,MAAQgC,OAGxDjC,SAASC,SA7DjBF,SASE,SAAS4C,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEjC,QAASiC,KATzFD,CAAA5C","file":"multiDownload.js","sourcesContent":["import browser from 'browser';\n\nfunction fallback(urls) {\n    var i = 0;\n\n    (function createIframe() {\n        var frame = document.createElement('iframe');\n        frame.style.display = 'none';\n        frame.src = urls[i++];\n        document.documentElement.appendChild(frame);\n\n        // the download init has to be sequential otherwise IE only use the first\n        var interval = setInterval(function () {\n            if (frame.contentWindow.document.readyState === 'complete' || frame.contentWindow.document.readyState === 'interactive') {\n                clearInterval(interval);\n\n                // Safari needs a timeout\n                setTimeout(function () {\n                    frame.parentNode.removeChild(frame);\n                }, 1000);\n\n                if (i < urls.length) {\n                    createIframe();\n                }\n            }\n        }, 100);\n    })();\n}\n\nfunction sameDomain(url) {\n    var a = document.createElement('a');\n    a.href = url;\n\n    return window.location.hostname === a.hostname && window.location.protocol === a.protocol;\n}\n\nfunction download(url) {\n    var a = document.createElement('a');\n    a.download = '';\n    a.href = url;\n    // firefox doesn't support `a.click()`...\n    a.dispatchEvent(new MouseEvent('click'));\n}\n\nexport default function (urls) {\n    if (!urls) {\n        throw new Error('`urls` required');\n    }\n\n    if (typeof document.createElement('a').download === 'undefined') {\n        return fallback(urls);\n    }\n\n    var delay = 0;\n\n    urls.forEach(function (url) {\n        // the download init has to be sequential for firefox if the urls are not on the same domain\n        if (browser.firefox && !sameDomain(url)) {\n            return setTimeout(download.bind(null, url), 100 * ++delay);\n        }\n\n        download(url);\n    });\n}\n"]}