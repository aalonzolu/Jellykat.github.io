define(["exports","inputManager","focusManager","browser","layoutManager","events","dom"],(function(_exports,_inputManager,_focusManager,_browser,_layoutManager,_events,_dom){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.showCursor=showCursor,_exports.hideCursor=hideCursor,_exports.default=void 0,_inputManager=_interopRequireDefault(_inputManager),_focusManager=_interopRequireDefault(_focusManager),_browser=_interopRequireDefault(_browser),_layoutManager=_interopRequireDefault(_layoutManager),_events=_interopRequireDefault(_events),_dom=_interopRequireDefault(_dom);var isMouseIdle,lastPointerMoveData,mouseInterval,self={},lastMouseInputTime=(new Date).getTime();function removeIdleClasses(){var classList=document.body.classList;classList.remove("mouseIdle"),classList.remove("mouseIdle-tv")}function showCursor(){isMouseIdle&&(isMouseIdle=!1,removeIdleClasses(),_events.default.trigger(self,"mouseactive"))}function hideCursor(){isMouseIdle||(isMouseIdle=!0,function addIdleClasses(){var classList=document.body.classList;classList.add("mouseIdle"),_layoutManager.default.tv&&classList.add("mouseIdle-tv")}(),_events.default.trigger(self,"mouseidle"))}function onPointerMove(e){var eventX=e.screenX,eventY=e.screenY;if(void 0!==eventX||void 0!==eventY){var obj=lastPointerMoveData;obj?Math.abs(eventX-obj.x)<10&&Math.abs(eventY-obj.y)<10||(obj.x=eventX,obj.y=eventY,lastMouseInputTime=(new Date).getTime(),function notifyApp(){_inputManager.default.notifyMouseMove()}(),showCursor()):lastPointerMoveData={x:eventX,y:eventY}}}function onPointerEnter(e){if("mouse"===(e.pointerType||(_layoutManager.default.mobile?"touch":"mouse"))&&!isMouseIdle){var parent=_focusManager.default.focusableParent(e.target);parent&&_focusManager.default.focus(parent)}}function onMouseInterval(){!isMouseIdle&&function mouseIdleTime(){return(new Date).getTime()-lastMouseInputTime}()>=5e3&&hideCursor()}function initMouse(){!function stopMouseInterval(){mouseInterval&&(clearInterval(mouseInterval),mouseInterval=null),removeIdleClasses()}(),_dom.default.removeEventListener(document,window.PointerEvent?"pointermove":"mousemove",onPointerMove,{passive:!0}),_layoutManager.default.mobile||(!function startMouseInterval(){mouseInterval||(mouseInterval=setInterval(onMouseInterval,5e3))}(),_dom.default.addEventListener(document,window.PointerEvent?"pointermove":"mousemove",onPointerMove,{passive:!0})),_dom.default.removeEventListener(document,window.PointerEvent?"pointerenter":"mouseenter",onPointerEnter,{capture:!0,passive:!0}),function enableFocusWithMouse(){return!!_layoutManager.default.tv&&(!_browser.default.web0s&&!!_browser.default.tv)}()&&_dom.default.addEventListener(document,window.PointerEvent?"pointerenter":"mouseenter",onPointerEnter,{capture:!0,passive:!0})}initMouse(),_events.default.on(_layoutManager.default,"modechange",initMouse);var _default={hideCursor:hideCursor,showCursor:showCursor};_exports.default=_default}));
//# sourceMappingURL=mouseManager.js.map
