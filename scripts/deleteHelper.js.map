{"version":3,"sources":["scripts/deleteHelper.js"],"names":["define","_require","_exports","_connectionManager","_confirm","_appRouter","_globalize","_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_getRequireWildcardCache","WeakMap","cache","alertText","options","Promise","resolve","reject","_resolve","_reject","imported","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","Object","defineProperty","getOwnPropertyDescriptor","key","hasOwnProperty","call","desc","set","then","_ref","alert","deleteItem","item","parentId","SeasonId","SeriesId","ParentId","apiClient","connectionManager","getApiClient","ServerId","title","globalize","translate","text","confirmText","primary","Id","navigate","appRouter","showItem","goHome","err","result","value","_default"],"mappings":"AAAAA,OAAO,CAAC,UAAW,UAAW,oBAAqB,UAAW,YAAa,cAAc,SAAUC,SAAUC,SAAUC,mBAAoBC,SAAUC,WAAYC,YAC/J,aAYA,SAASC,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEE,QAASF,KAEvF,SAASG,QAAQH,KAAmV,OAAtOG,QAArD,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAmC,SAASF,QAAQH,KAAO,cAAcA,KAA2B,SAASG,QAAQH,KAAO,OAAOA,KAAyB,mBAAXI,QAAyBJ,IAAIM,cAAgBF,QAAUJ,MAAQI,OAAOG,UAAY,gBAAkBP,MAAyBA,KAEnX,SAASQ,2BAA6B,GAAuB,mBAAZC,QAAwB,OAAO,KAAM,IAAIC,MAAQ,IAAID,QAA6F,OAAlFD,yBAA2B,SAASA,2BAA6B,OAAOE,OAAiBA,MAZ5M,SAASC,UAAUC,SACf,OAAO,IAAIC,SAAQ,SAAUC,QAASC,QAClC,IAAAF,SAAA,SAAAG,SAAAC,SAAA,OAAAxB,SAAA,CAAO,UAAP,SAAAyB,UAAA,OAAAF,SAYN,SAASG,wBAAwBnB,KAAO,GAAIA,KAAOA,IAAIC,WAAc,OAAOD,IAAO,GAAY,OAARA,KAAiC,WAAjBG,QAAQH,MAAoC,mBAARA,IAAsB,MAAO,CAAEE,QAASF,KAAS,IAAIU,MAAQF,2BAA4B,GAAIE,OAASA,MAAMU,IAAIpB,KAAQ,OAAOU,MAAMW,IAAIrB,KAAQ,IAAIsB,OAAS,GAAQC,sBAAwBC,OAAOC,gBAAkBD,OAAOE,yBAA0B,IAAK,IAAIC,OAAO3B,IAAO,GAAIwB,OAAOjB,UAAUqB,eAAeC,KAAK7B,IAAK2B,KAAM,CAAE,IAAIG,KAAOP,sBAAwBC,OAAOE,yBAAyB1B,IAAK2B,KAAO,KAAUG,OAASA,KAAKT,KAAOS,KAAKC,KAAQP,OAAOC,eAAeH,OAAQK,IAAKG,MAAgBR,OAAOK,KAAO3B,IAAI2B,KAAyE,OAA7DL,OAAOpB,QAAUF,IAASU,OAASA,MAAMqB,IAAI/B,IAAKsB,QAAkBA,OAZ1tBH,CAAAD,aAAAD,YAAgBe,MAAK,SAAAC,OACjBC,EADuCD,KAApB/B,SACbU,SAASoB,KAAKlB,QAASA,eAKlC,SAASqB,WAAWvB,SACvB,IAAMwB,KAAOxB,QAAQwB,KACfC,SAAWD,KAAKE,UAAYF,KAAKG,UAAYH,KAAKI,SAElDC,UAAYC,mBAAAA,QAAkBC,aAAaP,KAAKQ,UAEtD,OAAO,EAAAhD,SAAAM,SAAQ,CAEX2C,MAAOC,WAAAA,QAAUC,UAAU,oBAC3BC,KAAMF,WAAAA,QAAUC,UAAU,qBAC1BE,YAAaH,WAAAA,QAAUC,UAAU,UACjCG,QAAS,WAEVlB,MAAK,WACJ,OAAOS,UAAUN,WAAWC,KAAKe,IAAInB,MAAK,WAClCpB,QAAQwC,WACJf,SACAgB,WAAAA,QAAUC,SAASjB,SAAUD,KAAKQ,UAElCS,WAAAA,QAAUE,aAGnB,SAAUC,KACT,IAAMC,OAAS,SAATA,SACF,OAAO5C,QAAQE,OAAOyC,MAG1B,OAAO7C,UAAUmC,WAAAA,QAAUC,UAAU,sBAAsBf,KAAKyB,OAAQA,cArClFjC,OAAOC,eAAe/B,SAAU,aAAc,CAC5CgE,OAAO,IAEThE,SAASyC,WAAaA,WACtBzC,SAASQ,aAAU,EAPrBP,mBAAAI,uBAAAJ,oBACAC,SAAAG,uBAAAH,UACAC,WAAAE,uBAAAF,YACAC,WAAAC,uBAAAD,YA6DE,IAAI6D,SAnBS,CACXxB,WAAYA,YAqBdzC,SAASQ,QAAUyD","file":"deleteHelper.js","sourcesContent":["import connectionManager from 'connectionManager';\nimport confirm from 'confirm';\nimport appRouter from 'appRouter';\nimport globalize from 'globalize';\n\nfunction alertText(options) {\n    return new Promise(function (resolve, reject) {\n        import('alert').then(({default: alert}) => {\n            alert(options).then(resolve, resolve);\n        });\n    });\n}\n\nexport function deleteItem(options) {\n    const item = options.item;\n    const parentId = item.SeasonId || item.SeriesId || item.ParentId;\n\n    const apiClient = connectionManager.getApiClient(item.ServerId);\n\n    return confirm({\n\n        title: globalize.translate('HeaderDeleteItem'),\n        text: globalize.translate('ConfirmDeleteItem'),\n        confirmText: globalize.translate('Delete'),\n        primary: 'delete'\n\n    }).then(function () {\n        return apiClient.deleteItem(item.Id).then(function () {\n            if (options.navigate) {\n                if (parentId) {\n                    appRouter.showItem(parentId, item.ServerId);\n                } else {\n                    appRouter.goHome();\n                }\n            }\n        }, function (err) {\n            const result = function () {\n                return Promise.reject(err);\n            };\n\n            return alertText(globalize.translate('ErrorDeletingItem')).then(result, result);\n        });\n    });\n}\n\nexport default {\n    deleteItem: deleteItem\n};\n"]}