{"version":3,"sources":["scripts/browser.js"],"names":["define","_exports","_supportsCssAnimation","_supportsCssAnimationWithPrefix","Object","defineProperty","value","default","userAgent","navigator","matched","uaMatch","ua","toLowerCase","version","match","exec","indexOf","versionMatch","platform_match","browser","length","versionMajor","parseInt","split","isNaN","platform","edgeChromium","edg","edga","edgios","chrome","edge","opera","safari","ps4","tv","isMobile","terms","lower","i","mobile","xboxOne","animate","document","documentElement","tizen","window","web0s","edgeUwp","v","appVersion","tizenVersion","orsay","isTv","operaTv","slow","maxTouchPoints","touch","keyboard","hasKeyboard","supportsCssAnimation","allowPrefix","animation","domPrefixes","elm","createElement","undefined","style","animationName","osx","iOS","ipad","iphone","ipod","iOSVersion","iOSversion","test","_default"],"mappings":"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","file":"browser.js","sourcesContent":["function isTv() {\n    // This is going to be really difficult to get right\n    const userAgent = navigator.userAgent.toLowerCase();\n\n    if (userAgent.indexOf('tv') !== -1) {\n        return true;\n    }\n\n    if (userAgent.indexOf('samsungbrowser') !== -1) {\n        return true;\n    }\n\n    if (userAgent.indexOf('viera') !== -1) {\n        return true;\n    }\n\n    if (userAgent.indexOf('web0s') !== -1) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction isMobile(userAgent) {\n    const terms = [\n        'mobi',\n        'ipad',\n        'iphone',\n        'ipod',\n        'silk',\n        'gt-p1000',\n        'nexus 7',\n        'kindle fire',\n        'opera mini'\n    ];\n\n    const lower = userAgent.toLowerCase();\n\n    for (let i = 0, length = terms.length; i < length; i++) {\n        if (lower.indexOf(terms[i]) !== -1) {\n            return true;\n        }\n    }\n\n    return false;\n}\n\nfunction hasKeyboard(browser) {\n    if (browser.touch) {\n        return true;\n    }\n\n    if (browser.xboxOne) {\n        return true;\n    }\n\n    if (browser.ps4) {\n        return true;\n    }\n\n    if (browser.edgeUwp) {\n        // This is OK for now, but this won't always be true\n        // Should we use this?\n        // https://gist.github.com/wagonli/40d8a31bd0d6f0dd7a5d\n        return true;\n    }\n\n    if (browser.tv) {\n        return true;\n    }\n\n    return false;\n}\n\nfunction iOSversion() {\n    // MacIntel: Apple iPad Pro 11 iOS 13.1\n    if (/iP(hone|od|ad)|MacIntel/.test(navigator.platform)) {\n        // supports iOS 2.0 and later: <http://bit.ly/TJjs1V>\n        const v = (navigator.appVersion).match(/OS (\\d+)_(\\d+)_?(\\d+)?/);\n        return [parseInt(v[1], 10), parseInt(v[2], 10), parseInt(v[3] || 0, 10)];\n    }\n}\n\nlet _supportsCssAnimation;\nlet _supportsCssAnimationWithPrefix;\nfunction supportsCssAnimation(allowPrefix) {\n    // TODO: Assess if this is still needed, as all of our targets should natively support CSS animations.\n    if (allowPrefix) {\n        if (_supportsCssAnimationWithPrefix === true || _supportsCssAnimationWithPrefix === false) {\n            return _supportsCssAnimationWithPrefix;\n        }\n    } else {\n        if (_supportsCssAnimation === true || _supportsCssAnimation === false) {\n            return _supportsCssAnimation;\n        }\n    }\n\n    let animation = false;\n    const domPrefixes = ['Webkit', 'O', 'Moz'];\n    const elm = document.createElement('div');\n\n    if (elm.style.animationName !== undefined) {\n        animation = true;\n    }\n\n    if (animation === false && allowPrefix) {\n        for (let i = 0; i < domPrefixes.length; i++) {\n            if (elm.style[domPrefixes[i] + 'AnimationName'] !== undefined) {\n                animation = true;\n                break;\n            }\n        }\n    }\n\n    if (allowPrefix) {\n        _supportsCssAnimationWithPrefix = animation;\n        return _supportsCssAnimationWithPrefix;\n    } else {\n        _supportsCssAnimation = animation;\n        return _supportsCssAnimation;\n    }\n}\n\nconst uaMatch = function (ua) {\n    ua = ua.toLowerCase();\n\n    const match = /(edg)[ \\/]([\\w.]+)/.exec(ua) ||\n        /(edga)[ \\/]([\\w.]+)/.exec(ua) ||\n        /(edgios)[ \\/]([\\w.]+)/.exec(ua) ||\n        /(edge)[ \\/]([\\w.]+)/.exec(ua) ||\n        /(opera)[ \\/]([\\w.]+)/.exec(ua) ||\n        /(opr)[ \\/]([\\w.]+)/.exec(ua) ||\n        /(chrome)[ \\/]([\\w.]+)/.exec(ua) ||\n        /(safari)[ \\/]([\\w.]+)/.exec(ua) ||\n        /(firefox)[ \\/]([\\w.]+)/.exec(ua) ||\n        ua.indexOf('compatible') < 0 && /(mozilla)(?:.*? rv:([\\w.]+)|)/.exec(ua) ||\n        [];\n\n    const versionMatch = /(version)[ \\/]([\\w.]+)/.exec(ua);\n\n    let platform_match = /(ipad)/.exec(ua) ||\n        /(iphone)/.exec(ua) ||\n        /(windows)/.exec(ua) ||\n        /(android)/.exec(ua) ||\n        [];\n\n    let browser = match[1] || '';\n\n    if (browser === 'edge') {\n        platform_match = [''];\n    }\n\n    if (browser === 'opr') {\n        browser = 'opera';\n    }\n\n    let version;\n    if (versionMatch && versionMatch.length > 2) {\n        version = versionMatch[2];\n    }\n\n    version = version || match[2] || '0';\n\n    let versionMajor = parseInt(version.split('.')[0]);\n\n    if (isNaN(versionMajor)) {\n        versionMajor = 0;\n    }\n\n    return {\n        browser: browser,\n        version: version,\n        platform: platform_match[0] || '',\n        versionMajor: versionMajor\n    };\n};\n\nconst userAgent = navigator.userAgent;\n\nconst matched = uaMatch(userAgent);\nconst browser = {};\n\nif (matched.browser) {\n    browser[matched.browser] = true;\n    browser.version = matched.version;\n    browser.versionMajor = matched.versionMajor;\n}\n\nif (matched.platform) {\n    browser[matched.platform] = true;\n}\n\nbrowser.edgeChromium = browser.edg || browser.edga || browser.edgios;\n\nif (!browser.chrome && !browser.edgeChromium && !browser.edge && !browser.opera && userAgent.toLowerCase().indexOf('webkit') !== -1) {\n    browser.safari = true;\n}\n\nif (userAgent.toLowerCase().indexOf('playstation 4') !== -1) {\n    browser.ps4 = true;\n    browser.tv = true;\n}\n\nif (isMobile(userAgent)) {\n    browser.mobile = true;\n}\n\nif (userAgent.toLowerCase().indexOf('xbox') !== -1) {\n    browser.xboxOne = true;\n    browser.tv = true;\n}\nbrowser.animate = typeof document !== 'undefined' && document.documentElement.animate != null;\nbrowser.tizen = userAgent.toLowerCase().indexOf('tizen') !== -1 || window.tizen != null;\nbrowser.web0s = userAgent.toLowerCase().indexOf('Web0S'.toLowerCase()) !== -1;\nbrowser.edgeUwp = browser.edge && (userAgent.toLowerCase().indexOf('msapphost') !== -1 || userAgent.toLowerCase().indexOf('webview') !== -1);\n\nif (!browser.tizen) {\n    browser.orsay = userAgent.toLowerCase().indexOf('smarthub') !== -1;\n} else {\n    const v = (navigator.appVersion).match(/Tizen (\\d+).(\\d+)/);\n    browser.tizenVersion = parseInt(v[1]);\n}\n\nif (browser.edgeUwp) {\n    browser.edge = true;\n}\n\nbrowser.tv = isTv();\nbrowser.operaTv = browser.tv && userAgent.toLowerCase().indexOf('opr/') !== -1;\n\nif (browser.mobile || browser.tv) {\n    browser.slow = true;\n}\n\nif (typeof document !== 'undefined') {\n    /* eslint-disable-next-line compat/compat */\n    if (('ontouchstart' in window) || (navigator.maxTouchPoints > 0)) {\n        browser.touch = true;\n    }\n}\n\nbrowser.keyboard = hasKeyboard(browser);\nbrowser.supportsCssAnimation = supportsCssAnimation;\n\nbrowser.osx = userAgent.toLowerCase().indexOf('os x') !== -1;\nbrowser.iOS = browser.ipad || browser.iphone || browser.ipod;\n\nif (browser.iOS) {\n    browser.iOSVersion = iOSversion();\n\n    if (browser.iOSVersion && browser.iOSVersion.length >= 2) {\n        browser.iOSVersion = browser.iOSVersion[0] + (browser.iOSVersion[1] / 10);\n    }\n}\n\nexport default browser;\n"]}