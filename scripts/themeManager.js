function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}define(["exports","webSettings"],(function(_exports,webSettings){"use strict";function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return cache},cache}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,webSettings=function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}newObj.default=obj,cache&&cache.set(obj,newObj);return newObj}(webSettings);var currentThemeId,themeStyleElement=document.querySelector("#cssTheme");function getThemes(){return webSettings.getThemes()}var _default={getThemes:getThemes,setTheme:function setTheme(id){return new Promise((function(resolve,reject){currentThemeId&&currentThemeId===id?resolve():function getThemeStylesheetInfo(id){return getThemes().then((function(themes){var theme=themes.find((function(theme){return id?theme.id===id:theme.default}));return{stylesheetPath:"themes/"+theme.id+"/theme.css",themeId:theme.id}}))}(id).then((function(info){if(currentThemeId&&currentThemeId===info.themeId)resolve();else{var linkUrl=info.stylesheetPath;!function unloadTheme(){themeStyleElement&&(themeStyleElement.removeAttribute("href"),currentThemeId=null)}();var link=themeStyleElement;link||((link=document.createElement("link")).id="cssTheme",link.setAttribute("rel","stylesheet"),link.setAttribute("type","text/css"),document.body.appendChild(link));link.addEventListener("load",(function onLoad(e){e.target.removeEventListener("load",onLoad),resolve()})),link.setAttribute("href",linkUrl),themeStyleElement=link,currentThemeId=info.themeId}}))}))}};_exports.default=_default}));
//# sourceMappingURL=themeManager.js.map
