define(["exports","dom","events"],(function(_exports,_dom,_events){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}function getTouches(e){return e.changedTouches||e.targetTouches||e.touches}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=void 0,_dom=_interopRequireDefault(_dom),_events=_interopRequireDefault(_events);var _default=function(){function TouchHelper(elem,options){var touchTarget,touchStartX,touchStartY,lastDeltaX,lastDeltaY,thresholdYMet;!function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TouchHelper);var self=this,swipeXThreshold=(options=options||{}).swipeXThreshold||50,swipeYThreshold=options.swipeYThreshold||50,excludeTagNames=options.ignoreTagNames||[],touchStart=function touchStart(e){var touch=getTouches(e)[0];if(touchTarget=null,touchStartX=0,touchStartY=0,lastDeltaX=null,lastDeltaY=null,thresholdYMet=!1,touch){var currentTouchTarget=touch.target;if(_dom.default.parentWithTag(currentTouchTarget,excludeTagNames))return;touchTarget=currentTouchTarget,touchStartX=touch.clientX,touchStartY=touch.clientY}},touchEnd=function touchEnd(e){var isTouchMove="touchmove"===e.type;if(touchTarget){var deltaX,deltaY,clientX,clientY,touch=getTouches(e)[0];touch?(clientX=touch.clientX||0,clientY=touch.clientY||0,deltaX=clientX-(touchStartX||0),deltaY=clientY-(touchStartY||0)):(deltaX=0,deltaY=0);var currentDeltaX=null==lastDeltaX?deltaX:deltaX-lastDeltaX,currentDeltaY=null==lastDeltaY?deltaY:deltaY-lastDeltaY;lastDeltaX=deltaX,lastDeltaY=deltaY,deltaX>swipeXThreshold&&Math.abs(deltaY)<30?_events.default.trigger(self,"swiperight",[touchTarget]):deltaX<0-swipeXThreshold&&Math.abs(deltaY)<30?_events.default.trigger(self,"swipeleft",[touchTarget]):(deltaY<0-swipeYThreshold||thresholdYMet)&&Math.abs(deltaX)<30?(thresholdYMet=!0,_events.default.trigger(self,"swipeup",[touchTarget,{deltaY:deltaY,deltaX:deltaX,clientX:clientX,clientY:clientY,currentDeltaX:currentDeltaX,currentDeltaY:currentDeltaY}])):(deltaY>swipeYThreshold||thresholdYMet)&&Math.abs(deltaX)<30&&(thresholdYMet=!0,_events.default.trigger(self,"swipedown",[touchTarget,{deltaY:deltaY,deltaX:deltaX,clientX:clientX,clientY:clientY,currentDeltaX:currentDeltaX,currentDeltaY:currentDeltaY}])),isTouchMove&&options.preventDefaultOnMove&&e.preventDefault()}isTouchMove||(touchTarget=null,touchStartX=0,touchStartY=0,lastDeltaX=null,lastDeltaY=null,thresholdYMet=!1)};this.touchStart=touchStart,this.touchEnd=touchEnd,_dom.default.addEventListener(elem,"touchstart",touchStart,{passive:!0}),options.triggerOnMove&&_dom.default.addEventListener(elem,"touchmove",touchEnd,{passive:!options.preventDefaultOnMove}),_dom.default.addEventListener(elem,"touchend",touchEnd,{passive:!0}),_dom.default.addEventListener(elem,"touchcancel",touchEnd,{passive:!0})}return function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}(TouchHelper,[{key:"destroy",value:function destroy(){var elem=this.elem;if(elem){var touchStart=this.touchStart,touchEnd=this.touchEnd;_dom.default.removeEventListener(elem,"touchstart",touchStart,{passive:!0}),_dom.default.removeEventListener(elem,"touchmove",touchEnd,{passive:!0}),_dom.default.removeEventListener(elem,"touchend",touchEnd,{passive:!0}),_dom.default.removeEventListener(elem,"touchcancel",touchEnd,{passive:!0})}this.touchStart=null,this.touchEnd=null,this.elem=null}}]),TouchHelper}();_exports.default=_default}));
//# sourceMappingURL=touchHelper.js.map
