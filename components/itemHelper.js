define(["exports","apphost","globalize"],(function(_exports,_apphost,_globalize){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function getDisplayName(item){var options=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!item)throw new Error("null item passed into getDisplayName");"Timer"===item.Type&&(item=item.ProgramInfo||item);var name=("Program"!==item.Type&&"Recording"!==item.Type||!item.IsSeries&&!item.EpisodeTitle?item.Name:item.EpisodeTitle)||"";if("TvChannel"===item.Type)return item.ChannelNumber?item.ChannelNumber+" "+name:name;if("Episode"===item.Type&&0===item.ParentIndexNumber)name=_globalize.default.translate("ValueSpecialEpisodeName",name);else if(("Episode"===item.Type||"Program"===item.Type)&&null!=item.IndexNumber&&null!=item.ParentIndexNumber&&!1!==options.includeIndexNumber){var displayIndexNumber=item.IndexNumber,number=displayIndexNumber,nameSeparator=" - ";!1!==options.includeParentInfo?number="S"+item.ParentIndexNumber+":E"+number:nameSeparator=". ",item.IndexNumberEnd&&(number+="-"+(displayIndexNumber=item.IndexNumberEnd)),number&&(name=name?number+nameSeparator+name:number)}return name}function supportsAddingToCollection(item){return("Recording"!==item.Type||"Completed"===item.Status)&&(!item.CollectionType&&-1===["Genre","MusicGenre","Studio","UserView","CollectionFolder","Audio","Program","Timer","SeriesTimer"].indexOf(item.Type)&&"Photo"!==item.MediaType&&!isLocalItem(item))}function supportsAddingToPlaylist(item){return"Program"!==item.Type&&("TvChannel"!==item.Type&&("Timer"!==item.Type&&("SeriesTimer"!==item.Type&&("Photo"!==item.MediaType&&(("Recording"!==item.Type||"Completed"===item.Status)&&(!isLocalItem(item)&&("livetv"!==item.CollectionType&&(item.MediaType||item.IsFolder||"Genre"===item.Type||"MusicGenre"===item.Type||"MusicArtist"===item.Type))))))))}function canEdit(user,item){var itemType=item.Type;return"UserRootFolder"!==itemType&&"UserView"!==itemType&&("Program"!==itemType&&("Timer"!==itemType&&("SeriesTimer"!==itemType&&(("Recording"!==item.Type||"Completed"===item.Status)&&(!isLocalItem(item)&&user.Policy.IsAdministrator)))))}function isLocalItem(item){return!(!item||!item.Id||0!==item.Id.indexOf("local"))}function canIdentify(user,item){var itemType=item.Type;return!("Movie"!==itemType&&"Trailer"!==itemType&&"Series"!==itemType&&"BoxSet"!==itemType&&"Person"!==itemType&&"Book"!==itemType&&"MusicAlbum"!==itemType&&"MusicArtist"!==itemType&&"MusicVideo"!==itemType||!user.Policy.IsAdministrator||isLocalItem(item))}function canEditImages(user,item){var itemType=item.Type;return"Photo"!==item.MediaType&&("UserView"===itemType?!!user.Policy.IsAdministrator:("Recording"!==item.Type||"Completed"===item.Status)&&("Timer"!==itemType&&"SeriesTimer"!==itemType&&canEdit(user,item)&&!isLocalItem(item)))}function canSync(user,item){return!(user&&!user.Policy.EnableContentDownloading)&&(!isLocalItem(item)&&item.SupportsSync)}function canShare(item,user){return"Program"!==item.Type&&("TvChannel"!==item.Type&&("Timer"!==item.Type&&("SeriesTimer"!==item.Type&&(("Recording"!==item.Type||"Completed"===item.Status)&&(!isLocalItem(item)&&(user.Policy.EnablePublicSharing&&_apphost.default.supports("sharing")))))))}function enableDateAddedDisplay(item){return!item.IsFolder&&item.MediaType&&"Program"!==item.Type&&"TvChannel"!==item.Type&&"Trailer"!==item.Type}function canMarkPlayed(item){if("Program"===item.Type)return!1;if("Video"===item.MediaType){if("TvChannel"!==item.Type)return!0}else if("Audio"===item.MediaType){if("AudioPodcast"===item.Type)return!0;if("AudioBook"===item.Type)return!0}return"Series"===item.Type||"Season"===item.Type||"BoxSet"===item.Type||"Book"===item.MediaType||"Recording"===item.MediaType}function canRate(item){return!("Program"===item.Type||"Timer"===item.Type||"SeriesTimer"===item.Type||"CollectionFolder"===item.Type||"UserView"===item.Type||"Channel"===item.Type||!item.UserData)}function canConvert(item,user){if(!user.Policy.EnableMediaConversion)return!1;if(isLocalItem(item))return!1;var mediaType=item.MediaType;if("Book"===mediaType||"Photo"===mediaType||"Audio"===mediaType)return!1;if("livetv"===item.CollectionType)return!1;var type=item.Type;return"Channel"!==type&&"Person"!==type&&"Year"!==type&&"Program"!==type&&"Timer"!==type&&"SeriesTimer"!==type&&(!("Virtual"===item.LocationType&&!item.IsFolder)&&!item.IsPlaceHolder)}function canRefreshMetadata(item,user){if(user.Policy.IsAdministrator){if("livetv"===item.CollectionType)return!1;if("Timer"!==item.Type&&"SeriesTimer"!==item.Type&&"Program"!==item.Type&&"TvChannel"!==item.Type&&("Recording"!==item.Type||"Completed"===item.Status)&&!isLocalItem(item))return!0}return!1}function supportsMediaSourceSelection(item){return"Video"===item.MediaType&&("TvChannel"!==item.Type&&(!(!item.MediaSources||1===item.MediaSources.length&&"Placeholder"===item.MediaSources[0].Type)&&(!1!==item.EnableMediaSourceDisplay&&(null!=item.EnableMediaSourceDisplay||!item.SourceType||"Library"===item.SourceType))))}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.getDisplayName=getDisplayName,_exports.supportsAddingToCollection=supportsAddingToCollection,_exports.supportsAddingToPlaylist=supportsAddingToPlaylist,_exports.canEdit=canEdit,_exports.isLocalItem=isLocalItem,_exports.canIdentify=canIdentify,_exports.canEditImages=canEditImages,_exports.canSync=canSync,_exports.canShare=canShare,_exports.enableDateAddedDisplay=enableDateAddedDisplay,_exports.canMarkPlayed=canMarkPlayed,_exports.canRate=canRate,_exports.canConvert=canConvert,_exports.canRefreshMetadata=canRefreshMetadata,_exports.supportsMediaSourceSelection=supportsMediaSourceSelection,_exports.default=void 0,_apphost=_interopRequireDefault(_apphost),_globalize=_interopRequireDefault(_globalize);var _default={getDisplayName:getDisplayName,supportsAddingToCollection:supportsAddingToCollection,supportsAddingToPlaylist:supportsAddingToPlaylist,isLocalItem:isLocalItem,canIdentify:canIdentify,canEdit:canEdit,canEditImages:canEditImages,canSync:canSync,canShare:canShare,enableDateAddedDisplay:enableDateAddedDisplay,canMarkPlayed:canMarkPlayed,canRate:canRate,canConvert:canConvert,canRefreshMetadata:canRefreshMetadata,supportsMediaSourceSelection:supportsMediaSourceSelection};_exports.default=_default}));
//# sourceMappingURL=itemHelper.js.map
