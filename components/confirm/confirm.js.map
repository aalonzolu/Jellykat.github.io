{"version":3,"sources":["components/confirm/confirm.js"],"names":["define","_exports","_browser","_dialog","_globalize","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","_default","browser","tv","window","confirm","options","title","text","replaceAll","str","find","replace","split","join","Promise","resolve","reject","items","push","name","cancelText","globalize","translate","id","type","confirmText","primary","buttons","dialog","show","then","result"],"mappings":"AAAAA,OAAO,CAAC,UAAW,UAAW,SAAU,cAAc,SAAUC,SAAUC,SAAUC,QAASC,YAC3F,aAUA,SAASC,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEE,QAASF,KARvFG,OAAOC,eAAeT,SAAU,aAAc,CAC5CU,OAAO,IAETV,SAASO,aAAU,EANrBN,SAAAG,uBAAAH,UACAC,QAAAE,uBAAAF,SACAC,WAAAC,uBAAAD,YAYE,IAAIQ,SAJEC,SAAAA,QAAQC,IAAMC,OAAOC,QAEd,SAAAC,SACoB,iBAAZA,UACPA,QAAU,CACNC,MAAO,GACPC,KAAMF,UAId,IAAME,KAdd,SAASC,WAAWC,IAAKC,KAAMC,SAC3B,OAAOF,IAAIG,MAAMF,MAAMG,KAAKF,SAaXH,CAAWH,QAAQE,MAAQ,GAAI,QAAS,MAGrD,OAFeJ,OAAOC,QAAQG,MAGnBO,QAAQC,UAERD,QAAQE,UAKhB,SAACT,KAAMD,OACV,IAAID,QAEAA,QADgB,iBAATE,KACG,CACND,MAAOA,MACPC,KAAMA,MAGAA,KAGd,IAAMU,MAAQ,GAgBd,OAdAA,MAAMC,KAAK,CACPC,KAAMd,QAAQe,YAAcC,WAAAA,QAAUC,UAAU,gBAChDC,GAAI,SACJC,KAAM,WAGVP,MAAMC,KAAK,CACPC,KAAMd,QAAQoB,aAAeJ,WAAAA,QAAUC,UAAU,YACjDC,GAAI,KACJC,KAA0B,WAApBnB,QAAQqB,QAAuB,SAAW,WAGpDrB,QAAQsB,QAAUV,MAEXW,QAAAA,QAAOC,KAAKxB,SAASyB,MAAK,SAAAC,QAC7B,MAAe,OAAXA,OACOjB,QAAQC,UAGZD,QAAQE,aAc7B3B,SAASO,QAAUI","file":"confirm.js","sourcesContent":["import browser from 'browser';\nimport dialog from 'dialog';\nimport globalize from 'globalize';\n\n/* eslint-disable indent */\nexport default (() => {\n    function replaceAll(str, find, replace) {\n        return str.split(find).join(replace);\n    }\n\n    if (browser.tv && window.confirm) {\n        // Use the native confirm dialog\n        return options => {\n            if (typeof options === 'string') {\n                options = {\n                    title: '',\n                    text: options\n                };\n            }\n\n            const text = replaceAll(options.text || '', '<br/>', '\\n');\n            const result = window.confirm(text);\n\n            if (result) {\n                return Promise.resolve();\n            } else {\n                return Promise.reject();\n            }\n        };\n    } else {\n        // Use our own dialog\n        return (text, title) => {\n            let options;\n            if (typeof text === 'string') {\n                options = {\n                    title: title,\n                    text: text\n                };\n            } else {\n                options = text;\n            }\n\n            const items = [];\n\n            items.push({\n                name: options.cancelText || globalize.translate('ButtonCancel'),\n                id: 'cancel',\n                type: 'cancel'\n            });\n\n            items.push({\n                name: options.confirmText || globalize.translate('ButtonOk'),\n                id: 'ok',\n                type: options.primary === 'delete' ? 'delete' : 'submit'\n            });\n\n            options.buttons = items;\n\n            return dialog.show(options).then(result => {\n                if (result === 'ok') {\n                    return Promise.resolve();\n                }\n\n                return Promise.reject();\n            });\n        };\n    }\n})();\n/* eslint-enable indent */\n"]}