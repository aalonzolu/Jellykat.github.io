define(["require","exports","globalize","dom","emby-checkbox","emby-select","emby-input"],(function(_require,_exports,_globalize,_dom,_embyCheckbox,_embySelect,_embyInput){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _typeof(obj){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(obj){return typeof obj}:function _typeof(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj})(obj)}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function _getRequireWildcardCache(){if("function"!=typeof WeakMap)return null;var cache=new WeakMap;return _getRequireWildcardCache=function _getRequireWildcardCache(){return cache},cache}function populateLanguages(parent){return ApiClient.getCultures().then((function(languages){!function populateLanguagesIntoSelect(select,languages){var html="";html+="<option value=''></option>";for(var i=0;i<languages.length;i++){var culture=languages[i];html+="<option value='".concat(culture.TwoLetterISOLanguageName,"'>").concat(culture.DisplayName,"</option>")}select.innerHTML=html}(parent.querySelector("#selectLanguage"),languages),function populateLanguagesIntoList(element,languages){for(var html="",i=0;i<languages.length;i++){var culture=languages[i];html+='<label><input type="checkbox" is="emby-checkbox" class="chkSubtitleLanguage" data-lang="'.concat(culture.ThreeLetterISOLanguageName.toLowerCase(),'" /><span>').concat(culture.DisplayName,"</span></label>")}element.innerHTML=html}(parent.querySelector(".subtitleDownloadLanguages"),languages)}))}function populateCountries(select){return ApiClient.getCountries().then((function(allCountries){var html="";html+="<option value=''></option>";for(var i=0;i<allCountries.length;i++){var culture=allCountries[i];html+="<option value='".concat(culture.TwoLetterISORegionName,"'>").concat(culture.DisplayName,"</option>")}select.innerHTML=html}))}function populateRefreshInterval(select){var html="";html+="<option value='0'>".concat(_globalize.default.translate("Never"),"</option>"),html+=[30,60,90].map((function(val){return"<option value='".concat(val,"'>").concat(_globalize.default.translate("EveryNDays",val),"</option>")})).join(""),select.innerHTML=html}function renderMetadataReaders(page,plugins){var html="",elem=page.querySelector(".metadataReaders");if(plugins.length<1)return elem.innerHTML="",elem.classList.add("hide"),!1;html+='<h3 class="checkboxListLabel">'.concat(_globalize.default.translate("LabelMetadataReaders"),"</h3>"),html+='<div class="checkboxList paperList checkboxList-paperList">';for(var i=0;i<plugins.length;i++){var plugin=plugins[i];html+='<div class="listItem localReaderOption sortableOption" data-pluginname="'.concat(plugin.Name,'">'),html+='<span class="listItemIcon material-icons live_tv"></span>',html+='<div class="listItemBody">',html+='<h3 class="listItemBodyText">',html+=plugin.Name,html+="</h3>",html+="</div>",i>0?html+='<button type="button" is="paper-icon-button-light" title="'.concat(_globalize.default.translate("Up"),'" class="btnSortableMoveUp btnSortable" data-pluginindex="').concat(i,'"><span class="material-icons keyboard_arrow_up"></span></button>'):plugins.length>1&&(html+='<button type="button" is="paper-icon-button-light" title="'.concat(_globalize.default.translate("Down"),'" class="btnSortableMoveDown btnSortable" data-pluginindex="').concat(i,'"><span class="material-icons keyboard_arrow_down"></span></button>')),html+="</div>"}return html+="</div>",html+='<div class="fieldDescription">'.concat(_globalize.default.translate("LabelMetadataReadersHelp"),"</div>"),plugins.length<2?elem.classList.add("hide"):elem.classList.remove("hide"),elem.innerHTML=html,!0}function getMetadataFetchersForTypeHtml(availableTypeOptions,libraryOptionsForType){var html="",plugins=availableTypeOptions.MetadataFetchers;return(plugins=getOrderedPlugins(plugins,libraryOptionsForType.MetadataFetcherOrder||[])).length?(html+='<div class="metadataFetcher" data-type="'+availableTypeOptions.Type+'">',html+='<h3 class="checkboxListLabel">'+_globalize.default.translate("LabelTypeMetadataDownloaders",_globalize.default.translate(availableTypeOptions.Type))+"</h3>",html+='<div class="checkboxList paperList checkboxList-paperList">',plugins.forEach((function(plugin,index){html+='<div class="listItem metadataFetcherItem sortableOption" data-pluginname="'+plugin.Name+'">';var checkedHtml=(libraryOptionsForType.MetadataFetchers?libraryOptionsForType.MetadataFetchers.includes(plugin.Name):plugin.DefaultEnabled)?' checked="checked"':"";html+='<label class="listItemCheckboxContainer"><input type="checkbox" is="emby-checkbox" class="chkMetadataFetcher" data-pluginname="'+plugin.Name+'" '+checkedHtml+"><span></span></label>",html+='<div class="listItemBody">',html+='<h3 class="listItemBodyText">',html+=plugin.Name,html+="</h3>",html+="</div>",index>0?html+='<button type="button" is="paper-icon-button-light" title="'+_globalize.default.translate("Up")+'" class="btnSortableMoveUp btnSortable" data-pluginindex="'+index+'"><span class="material-icons keyboard_arrow_up"></span></button>':plugins.length>1&&(html+='<button type="button" is="paper-icon-button-light" title="'+_globalize.default.translate("Down")+'" class="btnSortableMoveDown btnSortable" data-pluginindex="'+index+'"><span class="material-icons keyboard_arrow_down"></span></button>'),html+="</div>"})),html+="</div>",html+='<div class="fieldDescription">'+_globalize.default.translate("LabelMetadataDownloadersHelp")+"</div>",html+="</div>"):html}function getTypeOptions(allOptions,type){for(var allTypeOptions=allOptions.TypeOptions||[],i=0;i<allTypeOptions.length;i++){var typeOptions=allTypeOptions[i];if(typeOptions.Type===type)return typeOptions}return null}function renderMetadataFetchers(page,availableOptions,libraryOptions){for(var html="",elem=page.querySelector(".metadataFetchers"),i=0;i<availableOptions.TypeOptions.length;i++){var availableTypeOptions=availableOptions.TypeOptions[i];html+=getMetadataFetchersForTypeHtml(availableTypeOptions,getTypeOptions(libraryOptions,availableTypeOptions.Type)||{})}return elem.innerHTML=html,html?(elem.classList.remove("hide"),page.querySelector(".fldAutoRefreshInterval").classList.remove("hide"),page.querySelector(".fldMetadataLanguage").classList.remove("hide"),page.querySelector(".fldMetadataCountry").classList.remove("hide")):(elem.classList.add("hide"),page.querySelector(".fldAutoRefreshInterval").classList.add("hide"),page.querySelector(".fldMetadataLanguage").classList.add("hide"),page.querySelector(".fldMetadataCountry").classList.add("hide")),!0}function renderSubtitleFetchers(page,availableOptions,libraryOptions){var html="",elem=page.querySelector(".subtitleFetchers"),plugins=availableOptions.SubtitleFetchers;if(!(plugins=getOrderedPlugins(plugins,libraryOptions.SubtitleFetcherOrder||[])).length)return html;html+='<h3 class="checkboxListLabel">'.concat(_globalize.default.translate("LabelSubtitleDownloaders"),"</h3>"),html+='<div class="checkboxList paperList checkboxList-paperList">';for(var i=0;i<plugins.length;i++){var plugin=plugins[i];html+='<div class="listItem subtitleFetcherItem sortableOption" data-pluginname="'.concat(plugin.Name,'">');var checkedHtml=(libraryOptions.DisabledSubtitleFetchers?!libraryOptions.DisabledSubtitleFetchers.includes(plugin.Name):plugin.DefaultEnabled)?' checked="checked"':"";html+='<label class="listItemCheckboxContainer"><input type="checkbox" is="emby-checkbox" class="chkSubtitleFetcher" data-pluginname="'.concat(plugin.Name,'" ').concat(checkedHtml,"><span></span></label>"),html+='<div class="listItemBody">',html+='<h3 class="listItemBodyText">',html+=plugin.Name,html+="</h3>",html+="</div>",i>0?html+='<button type="button" is="paper-icon-button-light" title="'.concat(_globalize.default.translate("Up"),'" class="btnSortableMoveUp btnSortable" data-pluginindex="').concat(i,'"><span class="material-icons keyboard_arrow_up"></span></button>'):plugins.length>1&&(html+='<button type="button" is="paper-icon-button-light" title="'.concat(_globalize.default.translate("Down"),'" class="btnSortableMoveDown btnSortable" data-pluginindex="').concat(i,'"><span class="material-icons keyboard_arrow_down"></span></button>')),html+="</div>"}html+="</div>",html+='<div class="fieldDescription">'.concat(_globalize.default.translate("SubtitleDownloadersHelp"),"</div>"),elem.innerHTML=html}function getImageFetchersForTypeHtml(availableTypeOptions,libraryOptionsForType){var html="",plugins=availableTypeOptions.ImageFetchers;if(!(plugins=getOrderedPlugins(plugins,libraryOptionsForType.ImageFetcherOrder||[])).length)return html;html+='<div class="imageFetcher" data-type="'+availableTypeOptions.Type+'">',html+='<div class="flex align-items-center" style="margin:1.5em 0 .5em;">',html+='<h3 class="checkboxListLabel" style="margin:0;">'+_globalize.default.translate("HeaderTypeImageFetchers",availableTypeOptions.Type)+"</h3>";var supportedImageTypes=availableTypeOptions.SupportedImageTypes||[];(supportedImageTypes.length>1||1===supportedImageTypes.length&&"Primary"!==supportedImageTypes[0])&&(html+='<button is="emby-button" class="raised btnImageOptionsForType" type="button" style="margin-left:1.5em;font-size:90%;"><span>'+_globalize.default.translate("HeaderFetcherSettings")+"</span></button>"),html+="</div>",html+='<div class="checkboxList paperList checkboxList-paperList">';for(var i=0;i<plugins.length;i++){var plugin=plugins[i];html+='<div class="listItem imageFetcherItem sortableOption" data-pluginname="'+plugin.Name+'">';var checkedHtml=(libraryOptionsForType.ImageFetchers?libraryOptionsForType.ImageFetchers.includes(plugin.Name):plugin.DefaultEnabled)?' checked="checked"':"";html+='<label class="listItemCheckboxContainer"><input type="checkbox" is="emby-checkbox" class="chkImageFetcher" data-pluginname="'+plugin.Name+'" '+checkedHtml+"><span></span></label>",html+='<div class="listItemBody">',html+='<h3 class="listItemBodyText">',html+=plugin.Name,html+="</h3>",html+="</div>",i>0?html+='<button type="button" is="paper-icon-button-light" title="'+_globalize.default.translate("Up")+'" class="btnSortableMoveUp btnSortable" data-pluginindex="'+i+'"><span class="material-icons keyboard_arrow_up"></span></button>':plugins.length>1&&(html+='<button type="button" is="paper-icon-button-light" title="'+_globalize.default.translate("Down")+'" class="btnSortableMoveDown btnSortable" data-pluginindex="'+i+'"><span class="material-icons keyboard_arrow_down"></span></button>'),html+="</div>"}return html+="</div>",html+='<div class="fieldDescription">'+_globalize.default.translate("LabelImageFetchersHelp")+"</div>",html+="</div>"}function renderImageFetchers(page,availableOptions,libraryOptions){for(var html="",elem=page.querySelector(".imageFetchers"),i=0;i<availableOptions.TypeOptions.length;i++){var availableTypeOptions=availableOptions.TypeOptions[i];html+=getImageFetchersForTypeHtml(availableTypeOptions,getTypeOptions(libraryOptions,availableTypeOptions.Type)||{})}return elem.innerHTML=html,html?(elem.classList.remove("hide"),page.querySelector(".chkDownloadImagesInAdvanceContainer").classList.remove("hide"),page.querySelector(".chkSaveLocalContainer").classList.remove("hide")):(elem.classList.add("hide"),page.querySelector(".chkDownloadImagesInAdvanceContainer").classList.add("hide"),page.querySelector(".chkSaveLocalContainer").classList.add("hide")),!0}function populateMetadataSettings(parent,contentType){var isNewLibrary=parent.classList.contains("newlibrary");return ApiClient.getJSON(ApiClient.getUrl("Libraries/AvailableOptions",{LibraryContentType:contentType,IsNewLibrary:isNewLibrary})).then((function(availableOptions){currentAvailableOptions=availableOptions,parent.availableOptions=availableOptions,function renderMetadataSavers(page,metadataSavers){var html="",elem=page.querySelector(".metadataSavers");if(!metadataSavers.length)return elem.innerHTML="",elem.classList.add("hide"),!1;html+='<h3 class="checkboxListLabel">'.concat(_globalize.default.translate("LabelMetadataSavers"),"</h3>"),html+='<div class="checkboxList paperList checkboxList-paperList">';for(var i=0;i<metadataSavers.length;i++){var plugin=metadataSavers[i];html+='<label><input type="checkbox" data-defaultenabled="'.concat(plugin.DefaultEnabled,'" is="emby-checkbox" class="chkMetadataSaver" data-pluginname="').concat(plugin.Name,'" ',!1,"><span>").concat(plugin.Name,"</span></label>")}return html+="</div>",html+='<div class="fieldDescription" style="margin-top:.25em;">'.concat(_globalize.default.translate("LabelMetadataSaversHelp"),"</div>"),elem.innerHTML=html,elem.classList.remove("hide"),!0}(parent,availableOptions.MetadataSavers),renderMetadataReaders(parent,availableOptions.MetadataReaders),renderMetadataFetchers(parent,availableOptions,{}),renderSubtitleFetchers(parent,availableOptions,{}),renderImageFetchers(parent,availableOptions,{}),availableOptions.SubtitleFetchers.length?parent.querySelector(".subtitleDownloadSettings").classList.remove("hide"):parent.querySelector(".subtitleDownloadSettings").classList.add("hide")})).catch((function(){return Promise.resolve()}))}function adjustSortableListElement(elem){var btnSortable=elem.querySelector(".btnSortable"),inner=btnSortable.querySelector(".material-icons");elem.previousSibling?(btnSortable.title=_globalize.default.translate("Up"),btnSortable.classList.add("btnSortableMoveUp"),btnSortable.classList.remove("btnSortableMoveDown"),inner.classList.remove("keyboard_arrow_down"),inner.classList.add("keyboard_arrow_up")):(btnSortable.title=_globalize.default.translate("Down"),btnSortable.classList.remove("btnSortableMoveUp"),btnSortable.classList.add("btnSortableMoveDown"),inner.classList.remove("keyboard_arrow_up"),inner.classList.add("keyboard_arrow_down"))}function showImageOptionsForType(type){new Promise((function(_resolve,_reject){return _require(["imageoptionseditor"],(function(imported){return _resolve(function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;if(null===obj||"object"!==_typeof(obj)&&"function"!=typeof obj)return{default:obj};var cache=_getRequireWildcardCache();if(cache&&cache.has(obj))return cache.get(obj);var newObj={},hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj)if(Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]}return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}(imported))}),_reject)})).then((function(_ref){var ImageOptionsEditor=_ref.default,typeOptions=getTypeOptions(currentLibraryOptions,type);typeOptions||(typeOptions={Type:type},currentLibraryOptions.TypeOptions.push(typeOptions));var availableOptions=getTypeOptions(currentAvailableOptions||{},type);(new ImageOptionsEditor).show(type,typeOptions,availableOptions)}))}function onImageFetchersContainerClick(e){var btnImageOptionsForType=_dom.default.parentWithClass(e.target,"btnImageOptionsForType");btnImageOptionsForType?showImageOptionsForType(_dom.default.parentWithClass(btnImageOptionsForType,"imageFetcher").getAttribute("data-type")):onSortableContainerClick.call(this,e)}function onSortableContainerClick(e){var btnSortable=_dom.default.parentWithClass(e.target,"btnSortable");if(btnSortable){var li=_dom.default.parentWithClass(btnSortable,"sortableOption"),list=_dom.default.parentWithClass(li,"paperList");if(btnSortable.classList.contains("btnSortableMoveDown")){var next=li.nextSibling;next&&(li.parentNode.removeChild(li),next.parentNode.insertBefore(li,next.nextSibling))}else{var prev=li.previousSibling;prev&&(li.parentNode.removeChild(li),prev.parentNode.insertBefore(li,prev))}Array.prototype.forEach.call(list.querySelectorAll(".sortableOption"),adjustSortableListElement)}}function bindEvents(parent){parent.querySelector(".metadataReaders").addEventListener("click",onSortableContainerClick),parent.querySelector(".subtitleFetchers").addEventListener("click",onSortableContainerClick),parent.querySelector(".metadataFetchers").addEventListener("click",onSortableContainerClick),parent.querySelector(".imageFetchers").addEventListener("click",onImageFetchersContainerClick)}function embed(_x,_x2,_x3){return _embed.apply(this,arguments)}function _embed(){return(_embed=_asyncToGenerator(regeneratorRuntime.mark((function _callee(parent,contentType,libraryOptions){var response,template,promises;return regeneratorRuntime.wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return currentLibraryOptions={TypeOptions:[]},currentAvailableOptions=null,null===libraryOptions&&parent.classList.add("newlibrary"),_context.next=6,fetch("components/libraryoptionseditor/libraryoptionseditor.template.html");case 6:return response=_context.sent,_context.next=9,response.text();case 9:template=_context.sent,parent.innerHTML=_globalize.default.translateHtml(template),populateRefreshInterval(parent.querySelector("#selectAutoRefreshInterval")),promises=[populateLanguages(parent),populateCountries(parent.querySelector("#selectCountry"))],Promise.all(promises).then((function(){return setContentType(parent,contentType).then((function(){libraryOptions&&setLibraryOptions(parent,libraryOptions),bindEvents(parent)}))}));case 14:case"end":return _context.stop()}}),_callee)})))).apply(this,arguments)}function setAdvancedVisible(parent,visible){for(var elems=parent.querySelectorAll(".advanced"),i=0;i<elems.length;i++)visible?elems[i].classList.remove("advancedHide"):elems[i].classList.add("advancedHide")}function setContentType(parent,contentType){return"homevideos"===contentType||"photos"===contentType?parent.querySelector(".chkEnablePhotosContainer").classList.remove("hide"):parent.querySelector(".chkEnablePhotosContainer").classList.add("hide"),"tvshows"!==contentType&&"movies"!==contentType&&"homevideos"!==contentType&&"musicvideos"!==contentType&&"mixed"!==contentType?parent.querySelector(".chapterSettingsSection").classList.add("hide"):parent.querySelector(".chapterSettingsSection").classList.remove("hide"),"tvshows"===contentType?(parent.querySelector(".chkImportMissingEpisodesContainer").classList.remove("hide"),parent.querySelector(".chkAutomaticallyGroupSeriesContainer").classList.remove("hide"),parent.querySelector(".fldSeasonZeroDisplayName").classList.remove("hide"),parent.querySelector("#txtSeasonZeroName").setAttribute("required","required")):(parent.querySelector(".chkImportMissingEpisodesContainer").classList.add("hide"),parent.querySelector(".chkAutomaticallyGroupSeriesContainer").classList.add("hide"),parent.querySelector(".fldSeasonZeroDisplayName").classList.add("hide"),parent.querySelector("#txtSeasonZeroName").removeAttribute("required")),"books"===contentType||"boxsets"===contentType||"playlists"===contentType||"music"===contentType?parent.querySelector(".chkEnableEmbeddedTitlesContainer").classList.add("hide"):parent.querySelector(".chkEnableEmbeddedTitlesContainer").classList.remove("hide"),"tvshows"===contentType?parent.querySelector(".chkEnableEmbeddedEpisodeInfosContainer").classList.remove("hide"):parent.querySelector(".chkEnableEmbeddedEpisodeInfosContainer").classList.add("hide"),populateMetadataSettings(parent,contentType)}function getLibraryOptions(parent){var options={EnableArchiveMediaFiles:!1,EnablePhotos:parent.querySelector(".chkEnablePhotos").checked,EnableRealtimeMonitor:parent.querySelector(".chkEnableRealtimeMonitor").checked,ExtractChapterImagesDuringLibraryScan:parent.querySelector(".chkExtractChaptersDuringLibraryScan").checked,EnableChapterImageExtraction:parent.querySelector(".chkExtractChapterImages").checked,DownloadImagesInAdvance:parent.querySelector("#chkDownloadImagesInAdvance").checked,EnableInternetProviders:!0,ImportMissingEpisodes:parent.querySelector("#chkImportMissingEpisodes").checked,SaveLocalMetadata:parent.querySelector("#chkSaveLocal").checked,EnableAutomaticSeriesGrouping:parent.querySelector(".chkAutomaticallyGroupSeries").checked,PreferredMetadataLanguage:parent.querySelector("#selectLanguage").value,MetadataCountryCode:parent.querySelector("#selectCountry").value,SeasonZeroDisplayName:parent.querySelector("#txtSeasonZeroName").value,AutomaticRefreshIntervalDays:parseInt(parent.querySelector("#selectAutoRefreshInterval").value),EnableEmbeddedTitles:parent.querySelector("#chkEnableEmbeddedTitles").checked,EnableEmbeddedEpisodeInfos:parent.querySelector("#chkEnableEmbeddedEpisodeInfos").checked,SkipSubtitlesIfEmbeddedSubtitlesPresent:parent.querySelector("#chkSkipIfGraphicalSubsPresent").checked,SkipSubtitlesIfAudioTrackMatches:parent.querySelector("#chkSkipIfAudioTrackPresent").checked,SaveSubtitlesWithMedia:parent.querySelector("#chkSaveSubtitlesLocally").checked,RequirePerfectSubtitleMatch:parent.querySelector("#chkRequirePerfectMatch").checked,MetadataSavers:Array.prototype.map.call(Array.prototype.filter.call(parent.querySelectorAll(".chkMetadataSaver"),(function(elem){return elem.checked})),(function(elem){return elem.getAttribute("data-pluginname")})),TypeOptions:[]};return options.LocalMetadataReaderOrder=Array.prototype.map.call(parent.querySelectorAll(".localReaderOption"),(function(elem){return elem.getAttribute("data-pluginname")})),options.SubtitleDownloadLanguages=Array.prototype.map.call(Array.prototype.filter.call(parent.querySelectorAll(".chkSubtitleLanguage"),(function(elem){return elem.checked})),(function(elem){return elem.getAttribute("data-lang")})),function setSubtitleFetchersIntoOptions(parent,options){options.DisabledSubtitleFetchers=Array.prototype.map.call(Array.prototype.filter.call(parent.querySelectorAll(".chkSubtitleFetcher"),(function(elem){return!elem.checked})),(function(elem){return elem.getAttribute("data-pluginname")})),options.SubtitleFetcherOrder=Array.prototype.map.call(parent.querySelectorAll(".subtitleFetcherItem"),(function(elem){return elem.getAttribute("data-pluginname")}))}(parent,options),function setMetadataFetchersIntoOptions(parent,options){for(var sections=parent.querySelectorAll(".metadataFetcher"),i=0;i<sections.length;i++){var section=sections[i],type=section.getAttribute("data-type"),typeOptions=getTypeOptions(options,type);typeOptions||(typeOptions={Type:type},options.TypeOptions.push(typeOptions)),typeOptions.MetadataFetchers=Array.prototype.map.call(Array.prototype.filter.call(section.querySelectorAll(".chkMetadataFetcher"),(function(elem){return elem.checked})),(function(elem){return elem.getAttribute("data-pluginname")})),typeOptions.MetadataFetcherOrder=Array.prototype.map.call(section.querySelectorAll(".metadataFetcherItem"),(function(elem){return elem.getAttribute("data-pluginname")}))}}(parent,options),function setImageFetchersIntoOptions(parent,options){for(var sections=parent.querySelectorAll(".imageFetcher"),i=0;i<sections.length;i++){var section=sections[i],type=section.getAttribute("data-type"),typeOptions=getTypeOptions(options,type);typeOptions||(typeOptions={Type:type},options.TypeOptions.push(typeOptions)),typeOptions.ImageFetchers=Array.prototype.map.call(Array.prototype.filter.call(section.querySelectorAll(".chkImageFetcher"),(function(elem){return elem.checked})),(function(elem){return elem.getAttribute("data-pluginname")})),typeOptions.ImageFetcherOrder=Array.prototype.map.call(section.querySelectorAll(".imageFetcherItem"),(function(elem){return elem.getAttribute("data-pluginname")}))}}(parent,options),function setImageOptionsIntoOptions(options){for(var originalTypeOptions=(currentLibraryOptions||{}).TypeOptions||[],i=0;i<originalTypeOptions.length;i++){var originalTypeOption=originalTypeOptions[i],typeOptions=getTypeOptions(options,originalTypeOption.Type);typeOptions||(typeOptions={Type:originalTypeOption.Type},options.TypeOptions.push(typeOptions)),originalTypeOption.ImageOptions&&(typeOptions.ImageOptions=originalTypeOption.ImageOptions)}}(options),options}function getOrderedPlugins(plugins,configuredOrder){return(plugins=plugins.slice(0)).sort((function(a,b){return(a=configuredOrder.indexOf(a.Name))<(b=configuredOrder.indexOf(b.Name))?-1:a>b?1:0})),plugins}function setLibraryOptions(parent,options){currentLibraryOptions=options,currentAvailableOptions=parent.availableOptions,parent.querySelector("#selectLanguage").value=options.PreferredMetadataLanguage||"",parent.querySelector("#selectCountry").value=options.MetadataCountryCode||"",parent.querySelector("#selectAutoRefreshInterval").value=options.AutomaticRefreshIntervalDays||"0",parent.querySelector("#txtSeasonZeroName").value=options.SeasonZeroDisplayName||"Specials",parent.querySelector(".chkEnablePhotos").checked=options.EnablePhotos,parent.querySelector(".chkEnableRealtimeMonitor").checked=options.EnableRealtimeMonitor,parent.querySelector(".chkExtractChaptersDuringLibraryScan").checked=options.ExtractChapterImagesDuringLibraryScan,parent.querySelector(".chkExtractChapterImages").checked=options.EnableChapterImageExtraction,parent.querySelector("#chkDownloadImagesInAdvance").checked=options.DownloadImagesInAdvance,parent.querySelector("#chkSaveLocal").checked=options.SaveLocalMetadata,parent.querySelector("#chkImportMissingEpisodes").checked=options.ImportMissingEpisodes,parent.querySelector(".chkAutomaticallyGroupSeries").checked=options.EnableAutomaticSeriesGrouping,parent.querySelector("#chkEnableEmbeddedTitles").checked=options.EnableEmbeddedTitles,parent.querySelector("#chkEnableEmbeddedEpisodeInfos").checked=options.EnableEmbeddedEpisodeInfos,parent.querySelector("#chkSkipIfGraphicalSubsPresent").checked=options.SkipSubtitlesIfEmbeddedSubtitlesPresent,parent.querySelector("#chkSaveSubtitlesLocally").checked=options.SaveSubtitlesWithMedia,parent.querySelector("#chkSkipIfAudioTrackPresent").checked=options.SkipSubtitlesIfAudioTrackMatches,parent.querySelector("#chkRequirePerfectMatch").checked=options.RequirePerfectSubtitleMatch,Array.prototype.forEach.call(parent.querySelectorAll(".chkMetadataSaver"),(function(elem){elem.checked=options.MetadataSavers?options.MetadataSavers.includes(elem.getAttribute("data-pluginname")):"true"===elem.getAttribute("data-defaultenabled")})),Array.prototype.forEach.call(parent.querySelectorAll(".chkSubtitleLanguage"),(function(elem){elem.checked=!!options.SubtitleDownloadLanguages&&options.SubtitleDownloadLanguages.includes(elem.getAttribute("data-lang"))})),renderMetadataReaders(parent,getOrderedPlugins(parent.availableOptions.MetadataReaders,options.LocalMetadataReaderOrder||[])),renderMetadataFetchers(parent,parent.availableOptions,options),renderImageFetchers(parent,parent.availableOptions,options),renderSubtitleFetchers(parent,parent.availableOptions,options)}var currentLibraryOptions,currentAvailableOptions;Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.embed=embed,_exports.setAdvancedVisible=setAdvancedVisible,_exports.setContentType=setContentType,_exports.getLibraryOptions=getLibraryOptions,_exports.setLibraryOptions=setLibraryOptions,_exports.default=void 0,_globalize=_interopRequireDefault(_globalize),_dom=_interopRequireDefault(_dom);var _default={embed:embed,setContentType:setContentType,getLibraryOptions:getLibraryOptions,setLibraryOptions:setLibraryOptions,setAdvancedVisible:setAdvancedVisible};_exports.default=_default}));
//# sourceMappingURL=libraryoptionseditor.js.map
