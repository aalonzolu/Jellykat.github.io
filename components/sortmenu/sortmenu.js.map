{"version":3,"sources":["components/sortmenu/sortmenu.js"],"names":["define","_require","_exports","_dialogHelper","_layoutManager","_globalize","userSettings","_embySelect","_paperIconButtonLight","_materialIcons","_formdialog","_embyButton","_flexStyles","_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_getRequireWildcardCache","WeakMap","cache","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","hasOwnProperty","call","desc","set","onSubmit","e","preventDefault","centerFocus","elem","horiz","on","Promise","_resolve","_reject","imported","then","_ref","scrollHelper","fn","value","_default","SortMenu","_classCallCheck","instance","Constructor","TypeError","this","_createClass","protoProps","staticProps","show","options","resolve","reject","_ref2","template","dialogOptions","removeOnClose","scrollY","layoutManager","tv","size","dlg","dialogHelper","createDialog","classList","add","submitted","html","innerHTML","globalize","translateHtml","fillSortBy","context","querySelector","map","o","name","join","sortOptions","initEditor","settings","addEventListener","sortOrder","sortBy","close","open","saveValues","settingsKey","setFilter"],"mappings":"AAAAA,OAAO,CAAC,UAAW,UAAW,eAAgB,gBAAiB,YAAa,eAAgB,cAAe,0BAA2B,iBAAkB,sBAAuB,cAAe,eAAe,SAAUC,SAAUC,SAAUC,cAAeC,eAAgBC,WAAYC,aAAcC,YAAaC,sBAAuBC,eAAgBC,YAAaC,YAAaC,aAChX,aAWA,SAASC,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEE,QAASF,KAEvF,SAASG,QAAQH,KAAmV,OAAtOG,QAArD,mBAAXC,QAAoD,iBAApBA,OAAOC,SAAmC,SAASF,QAAQH,KAAO,cAAcA,KAA2B,SAASG,QAAQH,KAAO,OAAOA,KAAyB,mBAAXI,QAAyBJ,IAAIM,cAAgBF,QAAUJ,MAAQI,OAAOG,UAAY,gBAAkBP,MAAyBA,KAInX,SAASQ,kBAAkBC,OAAQC,OAAS,IAAK,IAAIC,EAAI,EAAGA,EAAID,MAAME,OAAQD,IAAK,CAAE,IAAIE,WAAaH,MAAMC,GAAIE,WAAWC,WAAaD,WAAWC,aAAc,EAAOD,WAAWE,cAAe,EAAU,UAAWF,aAAYA,WAAWG,UAAW,GAAMC,OAAOC,eAAeT,OAAQI,WAAWM,IAAKN,aAI7S,SAASO,2BAA6B,GAAuB,mBAAZC,QAAwB,OAAO,KAAM,IAAIC,MAAQ,IAAID,QAA6F,OAAlFD,yBAA2B,SAASA,2BAA6B,OAAOE,OAAiBA,MAE1M,SAASC,wBAAwBvB,KAAO,GAAIA,KAAOA,IAAIC,WAAc,OAAOD,IAAO,GAAY,OAARA,KAAiC,WAAjBG,QAAQH,MAAoC,mBAARA,IAAsB,MAAO,CAAEE,QAASF,KAAS,IAAIsB,MAAQF,2BAA4B,GAAIE,OAASA,MAAME,IAAIxB,KAAQ,OAAOsB,MAAMG,IAAIzB,KAAQ,IAAI0B,OAAS,GAAQC,sBAAwBV,OAAOC,gBAAkBD,OAAOW,yBAA0B,IAAK,IAAIT,OAAOnB,IAAO,GAAIiB,OAAOV,UAAUsB,eAAeC,KAAK9B,IAAKmB,KAAM,CAAE,IAAIY,KAAOJ,sBAAwBV,OAAOW,yBAAyB5B,IAAKmB,KAAO,KAAUY,OAASA,KAAKN,KAAOM,KAAKC,KAAQf,OAAOC,eAAeQ,OAAQP,IAAKY,MAAgBL,OAAOP,KAAOnB,IAAImB,KAAyE,OAA7DO,OAAOxB,QAAUF,IAASsB,OAASA,MAAMU,IAAIhC,IAAK0B,QAAkBA,OAbluB,SAASO,SAASC,GAEd,OADAA,EAAEC,kBACK,EAUX,SAASC,YAAYC,KAAMC,MAAOC,IAC9B,IAAAC,SAAA,SAAAC,SAAAC,SAAA,OAAAvD,SAAA,CAAO,iBAAP,SAAAwD,UAAA,OAAAF,SAAAlB,wBAAAoB,aAAAD,YAAuBE,MAAK,SAAAC,MAA6B,IAAlBC,aAAkBD,KAA3B3C,QACpB6C,GAAKR,GAAK,KAAO,MACvBO,aAAaV,YAAYW,IAAIV,KAAMC,UAvBzCrB,OAAOC,eAAe9B,SAAU,aAAc,CAC5C4D,OAAO,IAET5D,SAASc,aAAU,EANrBb,cAAAU,uBAAAV,eACAC,eAAAS,uBAAAT,gBACAC,WAAAQ,uBAAAR,YACAC,aAAA+B,wBAAA/B,cA0DE,IAwEIyD,SAxEwB,WAC1B,SAASC,YA9CX,SAASC,gBAAgBC,SAAUC,aAAe,KAAMD,oBAAoBC,aAAgB,MAAM,IAAIC,UAAU,qCA+C5GH,CAAgBI,KAAML,UAmExB,OA9GF,SAASM,aAAaH,YAAaI,WAAYC,aAAmJ,OAAhID,YAAYjD,kBAAkB6C,YAAY9C,UAAWkD,YAAiBC,aAAalD,kBAAkB6C,YAAaK,aAAqBL,YA8CvMG,CAAaN,SAAU,CAAC,CACtB/B,IAAK,OACL6B,MAAO,SAASW,KAxBbC,SACD,OAAO,IAAIpB,SAAQ,SAAUqB,QAASC,QAClC,IAAAtB,SAAA,SAAAC,SAAAC,SAAA,OAAAvD,SAAA,CAAO,kCAAP,SAAAwD,UAAA,OAAAF,SAAAlB,wBAAAoB,aAAAD,YAAwCE,MAAK,SAAAmB,OAAyB,IAAdC,SAAcD,MAAvB7D,QACrC+D,cAAgB,CAClBC,eAAe,EACfC,SAAS,GAGTC,eAAAA,QAAcC,GACdJ,cAAcK,KAAO,aAErBL,cAAcK,KAAO,QAGzB,IAAMC,IAAMC,cAAAA,QAAaC,aAAaR,eAEtCM,IAAIG,UAAUC,IAAI,cAElB,IAuBIC,UAvBAC,KAAO,GAEXA,MAAQ,iCACRA,MAAQ,mJACRA,MAAQ,iDAERA,MAAQ,SAERA,MAAQb,SAERO,IAAIO,UAAYC,WAAAA,QAAUC,cAAcH,KAAM,QA1C9D,SAASI,WAAWC,QAAStB,SACJsB,QAAQC,cAAc,iBAE9BL,UAAYlB,QAAQwB,KAAI,SAAUC,GAC3C,MAAO,kBAAoBA,EAAErC,MAAQ,KAAOqC,EAAEC,KAAO,eACtDC,KAAK,IAuCIN,CAAWV,IAAKX,QAAQ4B,aA1DxC,SAASC,WAAWP,QAASQ,UACzBR,QAAQC,cAAc,QAAQQ,iBAAiB,SAAU1D,UAEzDiD,QAAQC,cAAc,oBAAoBnC,MAAQ0C,SAASE,UAC3DV,QAAQC,cAAc,iBAAiBnC,MAAQ0C,SAASG,OAuD5CJ,CAAWlB,IAAKX,QAAQ8B,UAExBnB,IAAIY,cAAc,cAAcQ,iBAAiB,SAAS,WACtDnB,cAAAA,QAAasB,MAAMvB,QAGnBH,eAAAA,QAAcC,IACdjC,YAAYmC,IAAIY,cAAc,uBAAuB,GAAO,GAKhEZ,IAAIY,cAAc,QAAQQ,iBAAiB,UAAU,WACjDf,WAAY,KACb,GAEHJ,cAAAA,QAAauB,KAAKxB,KAAK3B,MAAK,WAKxB,GAJIwB,eAAAA,QAAcC,IACdjC,YAAYmC,IAAIY,cAAc,uBAAuB,GAAO,GAG5DP,UAGA,OA7DxB,SAASoB,WAAWd,QAASe,aACzBzG,aAAa0G,UAAUD,YAAc,aAAcf,QAAQC,cAAc,oBAAoBnC,OAC7FxD,aAAa0G,UAAUD,YAAc,UAAWf,QAAQC,cAAc,iBAAiBnC,OAyDnEgD,CAAWzB,IAAKX,QAAQqC,kBACxBpC,UAIJC,sBA4BTZ,SArEmB,GAyE5B9D,SAASc,QAAU+C","file":"sortmenu.js","sourcesContent":["import dialogHelper from 'dialogHelper';\nimport layoutManager from 'layoutManager';\nimport globalize from 'globalize';\nimport * as userSettings from 'userSettings';\nimport 'emby-select';\nimport 'paper-icon-button-light';\nimport 'material-icons';\nimport 'css!./../formdialog';\nimport 'emby-button';\nimport 'flexStyles';\n\nfunction onSubmit(e) {\n    e.preventDefault();\n    return false;\n}\n\nfunction initEditor(context, settings) {\n    context.querySelector('form').addEventListener('submit', onSubmit);\n\n    context.querySelector('.selectSortOrder').value = settings.sortOrder;\n    context.querySelector('.selectSortBy').value = settings.sortBy;\n}\n\nfunction centerFocus(elem, horiz, on) {\n    import('scrollHelper').then(({default: scrollHelper}) => {\n        const fn = on ? 'on' : 'off';\n        scrollHelper.centerFocus[fn](elem, horiz);\n    });\n}\n\nfunction fillSortBy(context, options) {\n    const selectSortBy = context.querySelector('.selectSortBy');\n\n    selectSortBy.innerHTML = options.map(function (o) {\n        return '<option value=\"' + o.value + '\">' + o.name + '</option>';\n    }).join('');\n}\n\nfunction saveValues(context, settingsKey) {\n    userSettings.setFilter(settingsKey + '-sortorder', context.querySelector('.selectSortOrder').value);\n    userSettings.setFilter(settingsKey + '-sortby', context.querySelector('.selectSortBy').value);\n}\n\nclass SortMenu {\n    show(options) {\n        return new Promise(function (resolve, reject) {\n            import('text!./sortmenu.template.html').then(({default: template}) => {\n                const dialogOptions = {\n                    removeOnClose: true,\n                    scrollY: false\n                };\n\n                if (layoutManager.tv) {\n                    dialogOptions.size = 'fullscreen';\n                } else {\n                    dialogOptions.size = 'small';\n                }\n\n                const dlg = dialogHelper.createDialog(dialogOptions);\n\n                dlg.classList.add('formDialog');\n\n                let html = '';\n\n                html += '<div class=\"formDialogHeader\">';\n                html += '<button is=\"paper-icon-button-light\" class=\"btnCancel hide-mouse-idle-tv\" tabindex=\"-1\"><span class=\"material-icons arrow_back\"></span></button>';\n                html += '<h3 class=\"formDialogHeaderTitle\">${Sort}</h3>';\n\n                html += '</div>';\n\n                html += template;\n\n                dlg.innerHTML = globalize.translateHtml(html, 'core');\n\n                fillSortBy(dlg, options.sortOptions);\n                initEditor(dlg, options.settings);\n\n                dlg.querySelector('.btnCancel').addEventListener('click', function () {\n                    dialogHelper.close(dlg);\n                });\n\n                if (layoutManager.tv) {\n                    centerFocus(dlg.querySelector('.formDialogContent'), false, true);\n                }\n\n                let submitted;\n\n                dlg.querySelector('form').addEventListener('change', function () {\n                    submitted = true;\n                }, true);\n\n                dialogHelper.open(dlg).then(function () {\n                    if (layoutManager.tv) {\n                        centerFocus(dlg.querySelector('.formDialogContent'), false, false);\n                    }\n\n                    if (submitted) {\n                        saveValues(dlg, options.settingsKey);\n                        resolve();\n                        return;\n                    }\n\n                    reject();\n                });\n            });\n        });\n    }\n}\n\nexport default SortMenu;\n"]}