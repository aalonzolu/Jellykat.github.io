define(["exports","dom","appRouter","connectionManager"],(function(_exports,_dom,_appRouter,_connectionManager){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(_exports,"__esModule",{value:!0}),_exports.default=function onItemsContainerClick(e){var groupedCard=_dom.default.parentWithClass(e.target,"groupedCard");groupedCard&&function onGroupedCardClick(e,card){var itemId=card.getAttribute("data-id"),serverId=card.getAttribute("data-serverid"),apiClient=_connectionManager.default.getApiClient(serverId),userId=apiClient.getCurrentUserId(),playedIndicator=card.querySelector(".playedIndicator"),playedIndicatorHtml=playedIndicator?playedIndicator.innerHTML:null,options={Limit:parseInt(playedIndicatorHtml||"10"),Fields:"PrimaryImageAspectRatio,DateCreated",ParentId:itemId,GroupItems:!1},actionableParent=_dom.default.parentWithTag(e.target,["A","BUTTON","INPUT"]);if(!actionableParent||actionableParent.classList.contains("cardContent"))return apiClient.getJSON(apiClient.getUrl("Users/"+userId+"/Items/Latest",options)).then((function(items){if(1!==items.length){var url="details?id="+itemId+"&serverId="+serverId;Dashboard.navigate(url)}else _appRouter.default.showItem(items[0])})),e.stopPropagation(),e.preventDefault(),!1}(e,groupedCard)},_dom=_interopRequireDefault(_dom),_appRouter=_interopRequireDefault(_appRouter),_connectionManager=_interopRequireDefault(_connectionManager)}));
//# sourceMappingURL=groupedcards.js.map
