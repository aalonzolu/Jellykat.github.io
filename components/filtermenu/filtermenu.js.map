{"version":3,"sources":["components/filtermenu/filtermenu.js"],"names":["define","_require","_exports","_dom","_focusManager","_dialogHelper","_inputManager","_layoutManager","_connectionManager","_globalize","userSettings","_embyCheckbox","_embyInput","_paperIconButtonLight","_embySelect","_materialIcons","_formdialog","_embyButton","_flexStyles","_interopRequireDefault","obj","__esModule","default","_typeof","Symbol","iterator","constructor","prototype","_defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","Object","defineProperty","key","_getRequireWildcardCache","WeakMap","cache","_interopRequireWildcard","has","get","newObj","hasPropertyDescriptor","getOwnPropertyDescriptor","hasOwnProperty","call","desc","set","onSubmit","e","preventDefault","setBasicFilter","context","elem","value","checked","setFilter","moveCheckboxFocus","offset","parent","dom","parentWithClass","elems","focusManager","getFocusableElements","index","Math","min","newElem","max","focus","centerFocus","horiz","on","Promise","_resolve","_reject","imported","then","_ref","scrollHelper","fn","onInputCommand","detail","command","bindCheckboxInput","querySelectorAll","inputManager","off","_default","FilterMenu","_classCallCheck","instance","Constructor","TypeError","this","_createClass","protoProps","staticProps","show","options","resolve","reject","_ref2","template","dialogOptions","removeOnClose","scrollY","layoutManager","tv","size","dlg","dialogHelper","createDialog","classList","add","html","innerHTML","globalize","translateHtml","submitted","settingElements","visibleSettings","indexOf","getAttribute","remove","initEditor","settings","querySelector","addEventListener","tagName","videoTypes","VideoTypes","split","seriesStatuses","SeriesStatus","loadDynamicFilters","apiClient","connectionManager","getApiClient","serverId","filterMenuOptions","assign","UserId","getCurrentUserId","ParentId","parentId","IncludeItemTypes","itemTypes","join","getFilters","result","renderDynamicFilters","renderOptions","selector","cssClass","items","isCheckedFn","map","filter","itemHtml","Id","Name","Genres","delimeter","GenreIds","close","open","saveValues","settingsKey","push","genres"],"mappings":"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","file":"filtermenu.js","sourcesContent":["import dom from 'dom';\nimport focusManager from 'focusManager';\nimport dialogHelper from 'dialogHelper';\nimport inputManager from 'inputManager';\nimport layoutManager from 'layoutManager';\nimport connectionManager from 'connectionManager';\nimport globalize from 'globalize';\nimport * as userSettings from 'userSettings';\nimport 'emby-checkbox';\nimport 'emby-input';\nimport 'paper-icon-button-light';\nimport 'emby-select';\nimport 'material-icons';\nimport 'css!./../formdialog';\nimport 'emby-button';\nimport 'flexStyles';\n\nfunction onSubmit(e) {\n    e.preventDefault();\n    return false;\n}\nfunction renderOptions(context, selector, cssClass, items, isCheckedFn) {\n    var elem = context.querySelector(selector);\n\n    if (items.length) {\n        elem.classList.remove('hide');\n    } else {\n        elem.classList.add('hide');\n    }\n\n    var html = '';\n\n    html += items.map(function (filter) {\n        var itemHtml = '';\n\n        var checkedHtml = isCheckedFn(filter) ? ' checked' : '';\n        itemHtml += '<label>';\n        itemHtml += '<input is=\"emby-checkbox\" type=\"checkbox\"' + checkedHtml + ' data-filter=\"' + filter.Id + '\" class=\"' + cssClass + '\"/>';\n        itemHtml += '<span>' + filter.Name + '</span>';\n        itemHtml += '</label>';\n\n        return itemHtml;\n    }).join('');\n\n    elem.querySelector('.filterOptions').innerHTML = html;\n}\n\nfunction renderDynamicFilters(context, result, options) {\n    renderOptions(context, '.genreFilters', 'chkGenreFilter', result.Genres, function (i) {\n        // Switching from | to ,\n        var delimeter = (options.settings.GenreIds || '').indexOf('|') === -1 ? ',' : '|';\n        return (delimeter + (options.settings.GenreIds || '') + delimeter).indexOf(delimeter + i.Id + delimeter) !== -1;\n    });\n}\n\nfunction setBasicFilter(context, key, elem) {\n    var value = elem.checked;\n    value = value ? value : null;\n    userSettings.setFilter(key, value);\n}\nfunction moveCheckboxFocus(elem, offset) {\n    var parent = dom.parentWithClass(elem, 'checkboxList-verticalwrap');\n    var elems = focusManager.getFocusableElements(parent);\n\n    var index = -1;\n    for (let i = 0, length = elems.length; i < length; i++) {\n        if (elems[i] === elem) {\n            index = i;\n            break;\n        }\n    }\n\n    index += offset;\n\n    index = Math.min(elems.length - 1, index);\n    index = Math.max(0, index);\n\n    var newElem = elems[index];\n    if (newElem) {\n        focusManager.focus(newElem);\n    }\n}\nfunction centerFocus(elem, horiz, on) {\n    import('scrollHelper').then(({ default: scrollHelper }) => {\n        var fn = on ? 'on' : 'off';\n        scrollHelper.centerFocus[fn](elem, horiz);\n    });\n}\nfunction onInputCommand(e) {\n    switch (e.detail.command) {\n        case 'left':\n            moveCheckboxFocus(e.target, -1);\n            e.preventDefault();\n            break;\n        case 'right':\n            moveCheckboxFocus(e.target, 1);\n            e.preventDefault();\n            break;\n        default:\n            break;\n    }\n}\nfunction saveValues(context, settings, settingsKey) {\n    var elems = context.querySelectorAll('.simpleFilter');\n    for (let i = 0, length = elems.length; i < length; i++) {\n        if (elems[i].tagName === 'INPUT') {\n            setBasicFilter(context, settingsKey + '-filter-' + elems[i].getAttribute('data-settingname'), elems[i]);\n        } else {\n            setBasicFilter(context, settingsKey + '-filter-' + elems[i].getAttribute('data-settingname'), elems[i].querySelector('input'));\n        }\n    }\n\n    // Video type\n    var videoTypes = [];\n    elems = context.querySelectorAll('.chkVideoTypeFilter');\n\n    for (let i = 0, length = elems.length; i < length; i++) {\n        if (elems[i].checked) {\n            videoTypes.push(elems[i].getAttribute('data-filter'));\n        }\n    }\n    userSettings.setFilter(settingsKey + '-filter-VideoTypes', videoTypes.join(','));\n\n    // Series status\n    var seriesStatuses = [];\n    elems = context.querySelectorAll('.chkSeriesStatus');\n\n    for (let i = 0, length = elems.length; i < length; i++) {\n        if (elems[i].checked) {\n            seriesStatuses.push(elems[i].getAttribute('data-filter'));\n        }\n    }\n\n    // Genres\n    var genres = [];\n    elems = context.querySelectorAll('.chkGenreFilter');\n\n    for (let i = 0, length = elems.length; i < length; i++) {\n        if (elems[i].checked) {\n            genres.push(elems[i].getAttribute('data-filter'));\n        }\n    }\n    userSettings.setFilter(settingsKey + '-filter-GenreIds', genres.join(','));\n}\nfunction bindCheckboxInput(context, on) {\n    var elems = context.querySelectorAll('.checkboxList-verticalwrap');\n    for (let i = 0, length = elems.length; i < length; i++) {\n        if (on) {\n            inputManager.on(elems[i], onInputCommand);\n        } else {\n            inputManager.off(elems[i], onInputCommand);\n        }\n    }\n}\nfunction initEditor(context, settings) {\n    context.querySelector('form').addEventListener('submit', onSubmit);\n\n    var elems = context.querySelectorAll('.simpleFilter');\n    var i;\n    var length;\n\n    for (i = 0, length = elems.length; i < length; i++) {\n        if (elems[i].tagName === 'INPUT') {\n            elems[i].checked = settings[elems[i].getAttribute('data-settingname')] || false;\n        } else {\n            elems[i].querySelector('input').checked = settings[elems[i].getAttribute('data-settingname')] || false;\n        }\n    }\n\n    var videoTypes = settings.VideoTypes ? settings.VideoTypes.split(',') : [];\n    elems = context.querySelectorAll('.chkVideoTypeFilter');\n\n    for (i = 0, length = elems.length; i < length; i++) {\n        elems[i].checked = videoTypes.indexOf(elems[i].getAttribute('data-filter')) !== -1;\n    }\n\n    var seriesStatuses = settings.SeriesStatus ? settings.SeriesStatus.split(',') : [];\n    elems = context.querySelectorAll('.chkSeriesStatus');\n\n    for (i = 0, length = elems.length; i < length; i++) {\n        elems[i].checked = seriesStatuses.indexOf(elems[i].getAttribute('data-filter')) !== -1;\n    }\n\n    if (context.querySelector('.basicFilterSection .viewSetting:not(.hide)')) {\n        context.querySelector('.basicFilterSection').classList.remove('hide');\n    } else {\n        context.querySelector('.basicFilterSection').classList.add('hide');\n    }\n\n    if (context.querySelector('.featureSection .viewSetting:not(.hide)')) {\n        context.querySelector('.featureSection').classList.remove('hide');\n    } else {\n        context.querySelector('.featureSection').classList.add('hide');\n    }\n}\nfunction loadDynamicFilters(context, options) {\n    var apiClient = connectionManager.getApiClient(options.serverId);\n\n    var filterMenuOptions = Object.assign(options.filterMenuOptions, {\n\n        UserId: apiClient.getCurrentUserId(),\n        ParentId: options.parentId,\n        IncludeItemTypes: options.itemTypes.join(',')\n    });\n\n    apiClient.getFilters(filterMenuOptions).then((result) => {\n        renderDynamicFilters(context, result, options);\n    });\n}\nclass FilterMenu {\n    show(options) {\n        return new Promise( (resolve, reject) => {\n            import('text!./filtermenu.template.html').then(({ default: template }) => {\n                var dialogOptions = {\n                    removeOnClose: true,\n                    scrollY: false\n                };\n                if (layoutManager.tv) {\n                    dialogOptions.size = 'fullscreen';\n                } else {\n                    dialogOptions.size = 'small';\n                }\n\n                var dlg = dialogHelper.createDialog(dialogOptions);\n\n                dlg.classList.add('formDialog');\n\n                var html = '';\n\n                html += '<div class=\"formDialogHeader\">';\n                html += '<button is=\"paper-icon-button-light\" class=\"btnCancel hide-mouse-idle-tv\" tabindex=\"-1\"><span class=\"material-icons arrow_back\"></span></button>';\n                html += '<h3 class=\"formDialogHeaderTitle\">${Filters}</h3>';\n\n                html += '</div>';\n\n                html += template;\n\n                dlg.innerHTML = globalize.translateHtml(html, 'core');\n\n                var settingElements = dlg.querySelectorAll('.viewSetting');\n                for (let i = 0, length = settingElements.length; i < length; i++) {\n                    if (options.visibleSettings.indexOf(settingElements[i].getAttribute('data-settingname')) === -1) {\n                        settingElements[i].classList.add('hide');\n                    } else {\n                        settingElements[i].classList.remove('hide');\n                    }\n                }\n\n                initEditor(dlg, options.settings);\n                loadDynamicFilters(dlg, options);\n\n                bindCheckboxInput(dlg, true);\n                dlg.querySelector('.btnCancel').addEventListener('click', function () {\n                    dialogHelper.close(dlg);\n                });\n\n                if (layoutManager.tv) {\n                    centerFocus(dlg.querySelector('.formDialogContent'), false, true);\n                }\n\n                var submitted;\n\n                dlg.querySelector('form').addEventListener('change', function () {\n                    submitted = true;\n                }, true);\n\n                dialogHelper.open(dlg).then( function() {\n                    bindCheckboxInput(dlg, false);\n\n                    if (layoutManager.tv) {\n                        centerFocus(dlg.querySelector('.formDialogContent'), false, false);\n                    }\n\n                    if (submitted) {\n                        //if (!options.onChange) {\n                        saveValues(dlg, options.settings, options.settingsKey);\n                        return resolve();\n                        //}\n                    }\n                    return resolve();\n                });\n            });\n        });\n    }\n}\n\nexport default FilterMenu;\n"]}