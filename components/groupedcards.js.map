{"version":3,"sources":["components/groupedcards.js"],"names":["define","_exports","_dom","_appRouter","_connectionManager","_interopRequireDefault","obj","__esModule","default","Object","defineProperty","value","onItemsContainerClick","e","groupedCard","dom","parentWithClass","target","onGroupedCardClick","card","itemId","getAttribute","serverId","apiClient","connectionManager","getApiClient","userId","getCurrentUserId","playedIndicator","querySelector","playedIndicatorHtml","innerHTML","options","Limit","parseInt","Fields","ParentId","GroupItems","actionableParent","parentWithTag","classList","contains","getJSON","getUrl","then","items","length","url","Dashboard","navigate","appRouter","showItem","stopPropagation","preventDefault"],"mappings":"AAAAA,OAAO,CAAC,UAAW,MAAO,YAAa,sBAAsB,SAAUC,SAAUC,KAAMC,WAAYC,oBACjG,aAUA,SAASC,uBAAuBC,KAAO,OAAOA,KAAOA,IAAIC,WAAaD,IAAM,CAAEE,QAASF,KARvFG,OAAOC,eAAeT,SAAU,aAAc,CAC5CU,OAAO,IAETV,SAASO,QA8BQ,SAASI,sBAAsBC,GAC1C,IAAIC,YAAcC,KAAAA,QAAIC,gBAAgBH,EAAEI,OAAQ,eAE5CH,aAjCR,SAASI,mBAAmBL,EAAGM,MAC3B,IAAIC,OAASD,KAAKE,aAAa,WAC3BC,SAAWH,KAAKE,aAAa,iBAC7BE,UAAYC,mBAAAA,QAAkBC,aAAaH,UAC3CI,OAASH,UAAUI,mBACnBC,gBAAkBT,KAAKU,cAAc,oBACrCC,oBAAsBF,gBAAkBA,gBAAgBG,UAAY,KACpEC,QAAU,CACVC,MAAOC,SAASJ,qBAAuB,MACvCK,OAAQ,sCACRC,SAAUhB,OACViB,YAAY,GAEZC,iBAAmBvB,KAAAA,QAAIwB,cAAc1B,EAAEI,OAAQ,CAAC,IAAK,SAAU,UAEnE,IAAKqB,kBAAoBA,iBAAiBE,UAAUC,SAAS,eAWzD,OAVAlB,UAAUmB,QAAQnB,UAAUoB,OAAO,SAAWjB,OAAS,gBAAiBM,UAAUY,MAAK,SAAUC,OAC7F,GAAqB,IAAjBA,MAAMC,OAAV,CAIA,IAAIC,IAAM,cAAgB3B,OAAS,aAAeE,SAClD0B,UAAUC,SAASF,UAJHG,WAAAA,QAAUC,SAASN,MAAM,OAM7ChC,EAAEuC,kBACFvC,EAAEwC,kBACK,EAQPnC,CAAmBL,EAAGC,cAtClCZ,KAAAG,uBAAAH,MACAC,WAAAE,uBAAAF,YACAC,mBAAAC,uBAAAD","file":"groupedcards.js","sourcesContent":["/* eslint-disable indent */\n\nimport dom from 'dom';\nimport appRouter from 'appRouter';\nimport connectionManager from 'connectionManager';\n\n    function onGroupedCardClick(e, card) {\n        var itemId = card.getAttribute('data-id');\n        var serverId = card.getAttribute('data-serverid');\n        var apiClient = connectionManager.getApiClient(serverId);\n        var userId = apiClient.getCurrentUserId();\n        var playedIndicator = card.querySelector('.playedIndicator');\n        var playedIndicatorHtml = playedIndicator ? playedIndicator.innerHTML : null;\n        var options = {\n            Limit: parseInt(playedIndicatorHtml || '10'),\n            Fields: 'PrimaryImageAspectRatio,DateCreated',\n            ParentId: itemId,\n            GroupItems: false\n        };\n        var actionableParent = dom.parentWithTag(e.target, ['A', 'BUTTON', 'INPUT']);\n\n        if (!actionableParent || actionableParent.classList.contains('cardContent')) {\n            apiClient.getJSON(apiClient.getUrl('Users/' + userId + '/Items/Latest', options)).then(function (items) {\n                if (items.length === 1) {\n                    return void appRouter.showItem(items[0]);\n                }\n\n                var url = 'details?id=' + itemId + '&serverId=' + serverId;\n                Dashboard.navigate(url);\n            });\n            e.stopPropagation();\n            e.preventDefault();\n            return false;\n        }\n    }\n\n    export default function onItemsContainerClick(e) {\n        var groupedCard = dom.parentWithClass(e.target, 'groupedCard');\n\n        if (groupedCard) {\n            onGroupedCardClick(e, groupedCard);\n        }\n    }\n\n/* eslint-enable indent */\n"]}