define(["layoutManager","browser","actionsheet","css!./emby-select","webcomponents"],(function(_layoutManager,_browser,_actionsheet,_embySelect,_webcomponents){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}_layoutManager=_interopRequireDefault(_layoutManager),_browser=_interopRequireDefault(_browser),_actionsheet=_interopRequireDefault(_actionsheet);var EmbySelectPrototype=Object.create(HTMLSelectElement.prototype);function enableNativeMenu(){return!(!_browser.default.edgeUwp&&!_browser.default.xboxOne)||!(_browser.default.tizen||_browser.default.orsay||_browser.default.web0s)&&(!!_browser.default.tv||!_layoutManager.default.tv)}function showActionSheet(select){var labelElem=getLabel(select),title=labelElem?labelElem.textContent||labelElem.innerText:null;_actionsheet.default.show({items:select.options,positionTo:select,title:title}).then((function(value){!function setValue(select,value){select.value=value}(select,value),function triggerChange(select){var evt=document.createEvent("HTMLEvents");evt.initEvent("change",!1,!0),select.dispatchEvent(evt)}(select)}))}function getLabel(select){for(var elem=select.previousSibling;elem&&"LABEL"!==elem.tagName;)elem=elem.previousSibling;return elem}function onFocus(e){var label=getLabel(this);label&&label.classList.add("selectLabelFocused")}function onBlur(e){var label=getLabel(this);label&&label.classList.remove("selectLabelFocused")}function onMouseDown(e){e.button||enableNativeMenu()||(e.preventDefault(),showActionSheet(this))}function onKeyDown(e){switch(e.keyCode){case 13:return void(enableNativeMenu()||(e.preventDefault(),showActionSheet(this)));case 37:case 38:case 39:case 40:return void(_layoutManager.default.tv&&e.preventDefault())}}var inputId=0;EmbySelectPrototype.createdCallback=function(){this.id||(this.id="embyselect"+inputId,inputId++),this.classList.add("emby-select-withcolor"),_layoutManager.default.tv&&this.classList.add("emby-select-focusscale"),this.addEventListener("mousedown",onMouseDown),this.addEventListener("keydown",onKeyDown),this.addEventListener("focus",onFocus),this.addEventListener("blur",onBlur)},EmbySelectPrototype.attachedCallback=function(){if(!this.classList.contains("emby-select")){this.classList.add("emby-select");var label=this.ownerDocument.createElement("label");label.innerHTML=this.getAttribute("label")||"",label.classList.add("selectLabel"),label.htmlFor=this.id,this.parentNode.insertBefore(label,this),this.classList.contains("emby-select-withcolor")&&this.parentNode.insertAdjacentHTML("beforeend",'<div class="selectArrowContainer"><div style="visibility:hidden;display:none;">0</div><span class="selectArrow material-icons keyboard_arrow_down"></span></div>')}},EmbySelectPrototype.setLabel=function(text){this.parentNode.querySelector("label").innerHTML=text},document.registerElement("emby-select",{prototype:EmbySelectPrototype,extends:"select"})}));
//# sourceMappingURL=emby-select.js.map
